"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[55743],{15680:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>m});var r=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(a),p=n,m=u["".concat(s,".").concat(p)]||u[p]||h[p]||o;return a?r.createElement(m,i(i({ref:t},d),{},{components:a})):r.createElement(m,i({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:n,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}p.displayName="MDXCreateElement"},59998:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=a(58168),n=(a(96540),a(15680));const o={},i="How to decide whether to rebase or backport",l={unversionedId:"ai/rebase-backport-decision",id:"ai/rebase-backport-decision",title:"How to decide whether to rebase or backport",description:"Rules",source:"@site/research/ai/rebase-backport-decision.md",sourceDirName:"ai",slug:"/ai/rebase-backport-decision",permalink:"/research/ai/rebase-backport-decision",draft:!1,editUrl:"https://github.com/packit/research/tree/main/research/ai/rebase-backport-decision.md",tags:[],version:"current",frontMatter:{},sidebar:"autogenerated",previous:{title:"Making decisions in our projects",permalink:"/research/making-decisions/"},next:{title:"Tools/libraries similar or related to the Packit",permalink:"/research/automation-tools/"}},s={},c=[{value:"Rules",id:"rules",level:2},{value:"What can be automated",id:"what-can-be-automated",level:2},{value:"A way to indicate how to proceed",id:"a-way-to-indicate-how-to-proceed",level:2},{value:"Alternative approach",id:"alternative-approach",level:2},{value:"Maintainer feedback",id:"maintainer-feedback",level:2},{value:"Human requirements",id:"human-requirements",level:3},{value:"Can AI decide the type of resolution?",id:"can-ai-decide-the-type-of-resolution",level:4},{value:"Is a feedback from human vital/required?",id:"is-a-feedback-from-human-vitalrequired",level:4},{value:"What is the type of information we want from the real human?",id:"what-is-the-type-of-information-we-want-from-the-real-human",level:4},{value:"Would it be welcomed to collect data for human to decide?",id:"would-it-be-welcomed-to-collect-data-for-human-to-decide",level:4}],d={toc:c},u="wrapper";function h(e){let{components:t,...a}=e;return(0,n.yg)(u,(0,r.A)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"how-to-decide-whether-to-rebase-or-backport"},"How to decide whether to rebase or backport"),(0,n.yg)("h2",{id:"rules"},"Rules"),(0,n.yg)("p",null,"There are no hard rules, but the general consensus is that a rebase means a higher chance of ABI breakage,\nand the majority of packages in RHEL have ACG level 2, meaning they have to maintain ABI compatibility\nfor the entire lifecycle of a major RHEL release, thus rebasing is discouraged."),(0,n.yg)("h2",{id:"what-can-be-automated"},"What can be automated"),(0,n.yg)("p",null,"Final decision is always on the maintainer, the automation could:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"check past issues to see if the package is usually rebased, if the fixes are usually backported,\nor a combination of both, and suggest a way to proceed based on that"),(0,n.yg)("li",{parentName:"ul"},"read ACG level of a package for a given RHEL release from ",(0,n.yg)("a",{parentName:"li",href:"https://gitlab.cee.redhat.com/rcm/lifecycle-defs"},"https://gitlab.cee.redhat.com/rcm/lifecycle-defs"),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"ACG level 4 or unset means high probability that a rebase would be allowed (even if there are ABI changes)"))),(0,n.yg)("li",{parentName:"ul"},"perform the rebase anyway, do a scratch build and provide results of abidiff check\nand output of reverse dependency tests")),(0,n.yg)("p",null,"The automation could also cite or link the RHEL Development Guide:\n",(0,n.yg)("a",{parentName:"p",href:"https://one.redhat.com/rhel-development-guide/#_rebase_considerations"},"https://one.redhat.com/rhel-development-guide/#_rebase_considerations")),(0,n.yg)("h2",{id:"a-way-to-indicate-how-to-proceed"},"A way to indicate how to proceed"),(0,n.yg)("p",null,"There is a ",(0,n.yg)("inlineCode",{parentName:"p"},"Rebase")," keyword in Jira that should be used for rebases, though I have found issues\nthat were resolved with a rebase but without said keyword. Either way, it could be used as a clear indication\nthat the maintainer has decided to proceed with a rebase."),(0,n.yg)("h2",{id:"alternative-approach"},"Alternative approach"),(0,n.yg)("p",null,"The automation could do both rebasing and backporting as separate tasks and provide feedback for the maintainer to decide."),(0,n.yg)("h2",{id:"maintainer-feedback"},"Maintainer feedback"),(0,n.yg)("p",null,"Rebasing is rare, because there is a high level of uncerntainty and a risk of changed behavior\nnot covered with tests and hard to spot by a human but relied on by customers. Typically rebasing is only done in Fedora\nto cover the next major version of RHEL and during RHEL lifetime fixes are only backported."),(0,n.yg)("p",null,"It is unusual for a component to have a good (if any) upstream test suite. Often there are only regression tests\nthat have been written for RHEL over the time. This is again a factor that speaks against rebasing."),(0,n.yg)("p",null,"Usually only teams/maintainers that are upstream for their components do rebases."),(0,n.yg)("h3",{id:"human-requirements"},"Human requirements"),(0,n.yg)("h4",{id:"can-ai-decide-the-type-of-resolution"},"Can AI decide the type of resolution?"),(0,n.yg)("p",null,"Yes, but we would need to define criteria for a risk-free rebase. This would involve e.g.:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"there are no ABI changes"),(0,n.yg)("li",{parentName:"ul"},"the amount of changed code is under risk threshold (needs to be defined)"),(0,n.yg)("li",{parentName:"ul"},"there is a changelog that guarantees there are only bugfixes and no new features\n(as they would have to become supported)"),(0,n.yg)("li",{parentName:"ul"},"new release is trusted/verifiable (to prevent supply chain attacks)")),(0,n.yg)("h4",{id:"is-a-feedback-from-human-vitalrequired"},"Is a feedback from human vital/required?"),(0,n.yg)("p",null,"Not required if the rebase is deemed risk-free."),(0,n.yg)("h4",{id:"what-is-the-type-of-information-we-want-from-the-real-human"},"What is the type of information we want from the real human?"),(0,n.yg)("p",null,"Version to rebase to, but that's usually specified or inferable from e.g. CVE description\n(",(0,n.yg)("inlineCode",{parentName:"p"},"xterm before version 370 is vulnerable to buffer overflow"),")."),(0,n.yg)("h4",{id:"would-it-be-welcomed-to-collect-data-for-human-to-decide"},"Would it be welcomed to collect data for human to decide?"),(0,n.yg)("p",null,"Yes."))}h.isMDXComponent=!0}}]);