"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[836],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>h});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),c=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},l=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(a),m=o,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(h,r(r({ref:t},l),{},{components:a})):n.createElement(h,r({ref:t},l))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},11771:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=a(87462),o=(a(67294),a(3905));const i={title:"FAQ",date:new Date("2019-07-24T00:00:00.000Z"),sidebar_position:100},r="FAQ",s={unversionedId:"faq",id:"faq",title:"FAQ",description:"Can I use the packit service as soon as I install it into my repository?",source:"@site/docs/faq.md",sourceDirName:".",slug:"/faq",permalink:"/docs/faq",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/faq.md",tags:[],version:"current",sidebarPosition:100,frontMatter:{title:"FAQ",date:"2019-07-24T00:00:00.000Z",sidebar_position:100},sidebar:"autogenerated",previous:{title:"Workshop materials",permalink:"/docs/workshops-materials"}},p={},c=[{value:"Can I use the packit service as soon as I install it into my repository?",id:"can-i-use-the-packit-service-as-soon-as-i-install-it-into-my-repository",level:2},{value:"Can I use packit service for any GitHub repository?",id:"can-i-use-packit-service-for-any-github-repository",level:2},{value:"How can I contact you?",id:"how-can-i-contact-you",level:2},{value:"Why do I have to maintain .packit.yaml and a spec file upstream?",id:"why-do-i-have-to-maintain-packityaml-and-a-spec-file-upstream",level:2},{value:"But what are the benefits?",id:"but-what-are-the-benefits",level:2},{value:"Why Fedora?",id:"why-fedora",level:2},{value:"How is Packit different from other services?",id:"how-is-packit-different-from-other-services",level:2},{value:"Can we use Packit with Gitlab?",id:"can-we-use-packit-with-gitlab",level:2},{value:"How can I download RPM spec file if it is not part of upstream repository?",id:"how-can-i-download-rpm-spec-file-if-it-is-not-part-of-upstream-repository",level:2},{value:"I have a template of a spec file in my repo: can packit work with it?",id:"i-have-a-template-of-a-spec-file-in-my-repo-can-packit-work-with-it",level:2},{value:"Can I use CentOS Stream with packit service?",id:"can-i-use-centos-stream-with-packit-service",level:2},{value:"After adding tests I see error &#39;No FMF metadata found.&#39;",id:"after-adding-tests-i-see-error-no-fmf-metadata-found",level:2},{value:"Does packit work with rpmautospec?",id:"does-packit-work-with-rpmautospec",level:2},{value:"How do I install dependencies for my commands in packit-service?",id:"how-do-i-install-dependencies-for-my-commands-in-packit-service",level:2},{value:"A command failed in packit-service: how do I reproduce it locally?",id:"a-command-failed-in-packit-service-how-do-i-reproduce-it-locally",level:2}],l={toc:c},d="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(d,(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"faq"},"FAQ"),(0,o.kt)("h2",{id:"can-i-use-the-packit-service-as-soon-as-i-install-it-into-my-repository"},"Can I use the packit service as soon as I install it into my repository?"),(0,o.kt)("p",null,"Thanks for your interest in Packit Service! In order to start using the\nservice, your repository or namespace needs to be allowed.\nJust be aware that we are now onboarding Fedora contributors who have\na valid ",(0,o.kt)("a",{parentName:"p",href:"https://fedoraproject.org/wiki/Account_System"},"Fedora Account System")," account.\nFor more details on how to get allowed for our service, please read\nabout the process ",(0,o.kt)("a",{parentName:"p",href:"/docs/guide/#2-approval"},"here"),"."),(0,o.kt)("h2",{id:"can-i-use-packit-service-for-any-github-repository"},"Can I use packit service for any GitHub repository?"),(0,o.kt)("p",null,"Since Packit Service builds your PRs in Fedora Copr build service, by using\nPackit-as-a-service, your software needs to comply with ",(0,o.kt)("a",{parentName:"p",href:"https://docs.pagure.org/copr.copr/user_documentation.html#what-i-can-build-in-copr"},"Copr\nrules"),".\nIf any of these points are violated, we'll remove the builds and may put you on\na blocklist, so you won't be able to use the service again."),(0,o.kt)("h2",{id:"how-can-i-contact-you"},"How can I contact you?"),(0,o.kt)("p",null,"If you encounter a problem while using packit or Packit Service, please open an\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/packit/packit-service/issues/new"},"upstream issue"),".\nIn case of any other questions, feel free to ",(0,o.kt)("a",{parentName:"p",href:"/#contact"},"contact us"),"."),(0,o.kt)("h2",{id:"why-do-i-have-to-maintain-packityaml-and-a-spec-file-upstream"},"Why do I have to maintain .packit.yaml and a spec file upstream?"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/packit/packit/issues/574"},"We are working")," on simplifying the ",(0,o.kt)("inlineCode",{parentName:"p"},".packit.yaml")," so it's as small as possible.\nWe will also handle all potentially backward incompatible changes of ",(0,o.kt)("inlineCode",{parentName:"p"},".packit.yaml"),".\n",(0,o.kt)("inlineCode",{parentName:"p"},"Spec")," file can be downloaded (see specific question below) from ",(0,o.kt)("a",{parentName:"p",href:"https://src.fedoraproject.org"},"Fedora Pagure")," instead of having it included in the upstream repository."),(0,o.kt)("h2",{id:"but-what-are-the-benefits"},"But what are the benefits?"),(0,o.kt)("p",null,"Packit makes it trivial to run your project as part of an OS.\nIt provides feedback to your project at the time when the changes are being developed\nso you can fix incompatible code when you are working on it, not when it's already released.\nWhen you push commits to a pull request, you'll get RPM build and test results right away."),(0,o.kt)("h2",{id:"why-fedora"},"Why Fedora?"),(0,o.kt)("p",null,"We've started with Fedora Linux because we work for Red Hat and we \u2764 Fedora."),(0,o.kt)("h2",{id:"how-is-packit-different-from-other-services"},"How is Packit different from other services?"),(0,o.kt)("p",null,"Packit connects the existing services (",(0,o.kt)("a",{parentName:"p",href:"https://copr.fedorainfracloud.org"},"Copr"),",\n",(0,o.kt)("a",{parentName:"p",href:"https://src.fedoraproject.org"},"Fedora dist-git"),", ",(0,o.kt)("a",{parentName:"p",href:"https://koji.fedoraproject.org"},"Koji"),",\n",(0,o.kt)("a",{parentName:"p",href:"https://bodhi.fedoraproject.org"},"Bodhi"),") together."),(0,o.kt)("h2",{id:"can-we-use-packit-with-gitlab"},"Can we use Packit with Gitlab?"),(0,o.kt)("p",null,"Yes! You can find instructions at the ",(0,o.kt)("a",{parentName:"p",href:"/docs/guide#gitlab"},"Packit Service page"),"."),(0,o.kt)("h2",{id:"how-can-i-download-rpm-spec-file-if-it-is-not-part-of-upstream-repository"},"How can I download RPM spec file if it is not part of upstream repository?"),(0,o.kt)("p",null,"If you do not want to have the RPM spec file in your upstream repository,\nyou can download it in ",(0,o.kt)("a",{parentName:"p",href:"/docs/configuration/actions/"},"actions")," section."),(0,o.kt)("p",null,"Add ",(0,o.kt)("a",{parentName:"p",href:"/docs/configuration/actions/"},(0,o.kt)("inlineCode",{parentName:"a"},"actions"))," section to your packit.yaml configuration file and\ndownload the spec file in a hook ",(0,o.kt)("inlineCode",{parentName:"p"},"post_upstream_clone"),". The environment where\nthese commands are run is limited, so make sure to install relevant packages\nusing the ",(0,o.kt)("a",{parentName:"p",href:"/docs/configuration/#srpm_build_deps"},(0,o.kt)("inlineCode",{parentName:"a"},"srpm_build_deps"))," option."),(0,o.kt)("p",null,"The configuration file with downloading the RPM spec file now looks like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'specfile_path: packit.spec\nfiles_to_sync:\n  - packit.spec\n  - .packit.yaml\nupstream_package_name: packitos\ndownstream_package_name: packit\nactions:\n    post-upstream-clone: "wget https://src.fedoraproject.org/rpms/packit/raw/main/f/packit.spec -O packit.spec"\nsrpm_build_deps:\n  - wget\n')),(0,o.kt)("h2",{id:"i-have-a-template-of-a-spec-file-in-my-repo-can-packit-work-with-it"},"I have a template of a spec file in my repo: can packit work with it?"),(0,o.kt)("p",null,"Yes!"),(0,o.kt)("p",null,"The solution is, again, actions and hooks. Just render the spec after the upstream repo is cloned:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'specfile_path: my-project.spec\nupstream_package_name: my-project-src\ndownstream_package_name: my-project\nactions:\n    post-upstream-clone: "make generate-spec"\n')),(0,o.kt)("p",null,'Where the "generate-spec" make target could look like this:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"generate-spec:\n    sed -e 's/@@VERSION@@/$(VERSION)/g' my-project.spec.template >my-project.spec\n")),(0,o.kt)("p",null,"As a practical example, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cockpit-project/cockpit-podman"},"cockpit-podman\nproject")," is using this\nfunctionality."),(0,o.kt)("h2",{id:"can-i-use-centos-stream-with-packit-service"},"Can I use CentOS Stream with packit service?"),(0,o.kt)("p",null,"Yes, you can! It's very simple, just add ",(0,o.kt)("inlineCode",{parentName:"p"},"centos-stream-8-x86_64")," as a target for\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"copr_build")," job:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"jobs:\n- job: copr_build\n  trigger: pull_request\n  targets:\n    - centos-stream-8-x86_64\n")),(0,o.kt)("h2",{id:"after-adding-tests-i-see-error-no-fmf-metadata-found"},"After adding tests I see error 'No FMF metadata found.'"),(0,o.kt)("p",null,"If you encounter this error when running tests via Testing Farm,\nit means you forgot to initialize the metadata tree with ",(0,o.kt)("inlineCode",{parentName:"p"},"fmf init"),"\nand include the ",(0,o.kt)("inlineCode",{parentName:"p"},".fmf")," directory in the pull request.\nSee ",(0,o.kt)("a",{parentName:"p",href:"/docs/testing-farm"},"Testing Farm documentation")," for more information."),(0,o.kt)("h2",{id:"does-packit-work-with-rpmautospec"},"Does packit work with rpmautospec?"),(0,o.kt)("p",null,"Good that you ask. It does, packit works with rpmautospec quite nicely."),(0,o.kt)("p",null,"Before you start, please make sure that you follow ",(0,o.kt)("a",{parentName:"p",href:"https://docs.pagure.org/Fedora-Infra.rpmautospec/"},"latest documentation for rpmautospec"),"."),(0,o.kt)("p",null,"rpmautospec utilizes two RPM macros:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"autorelease")," \u2014 to populate ",(0,o.kt)("inlineCode",{parentName:"li"},"Release")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"autochangelog")," \u2014 to figure out changelog")),(0,o.kt)("p",null,"If you want your upstream spec file to also work well when ",(0,o.kt)("inlineCode",{parentName:"p"},"rpmautospec-rpm-macros")," is not installed, set ",(0,o.kt)("inlineCode",{parentName:"p"},"Release")," to this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Release:  %{?autorelease}%{!?autorelease:1%{?dist}}\n")),(0,o.kt)("p",null,"This construct uses ",(0,o.kt)("inlineCode",{parentName:"p"},"autorelease")," macro if it's defined, and if it's not, it sets release to ",(0,o.kt)("inlineCode",{parentName:"p"},"1%{?dist}"),"."),(0,o.kt)("p",null,"For ",(0,o.kt)("inlineCode",{parentName:"p"},"%changelog"),", you don't need to include the changelog file upstream.\nYou can have it downstream only, which makes sense - changelog is specific to a release."),(0,o.kt)("h2",{id:"how-do-i-install-dependencies-for-my-commands-in-packit-service"},"How do I install dependencies for my commands in packit-service?"),(0,o.kt)("p",null,"For installations made before September 6, 2022,\nPackit runs all the commands, defined by you, in a sandbox which is locked-down."),(0,o.kt)("p",null,"As for the actions needed during SRPM builds, we are transitioning into a solution where SRPMs are built directly in Copr\nand  therefore for these actions, you can define your dependencies via ",(0,o.kt)("a",{parentName:"p",href:"/docs/configuration/#srpm_build_deps"},(0,o.kt)("inlineCode",{parentName:"a"},"srpm_build_deps"),"\nkey")," in the configuration file.\nYou can read more about this transition ",(0,o.kt)("a",{parentName:"p",href:"/posts/copr-srpms"},"here"),"."),(0,o.kt)("h2",{id:"a-command-failed-in-packit-service-how-do-i-reproduce-it-locally"},"A command failed in packit-service: how do I reproduce it locally?"),(0,o.kt)("p",null,"Please read ",(0,o.kt)("a",{parentName:"p",href:"reproduce-locally"},"this document on how to reproduce locally"),"."))}u.isMDXComponent=!0}}]);