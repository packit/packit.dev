"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[71016],{15680:(e,n,a)=>{a.d(n,{xA:()=>u,yg:()=>y});var t=a(96540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=t.createContext({}),g=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},u=function(e){var n=g(e.components);return t.createElement(o.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=g(a),c=r,y=p["".concat(o,".").concat(c)]||p[c]||m[c]||l;return a?t.createElement(y,s(s({ref:n},u),{},{components:a})):t.createElement(y,s({ref:n},u))}));function y(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=a.length,s=new Array(l);s[0]=c;var i={};for(var o in n)hasOwnProperty.call(n,o)&&(i[o]=n[o]);i.originalType=e,i[p]="string"==typeof e?e:r,s[1]=i;for(var g=2;g<l;g++)s[g]=a[g];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}c.displayName="MDXCreateElement"},39129:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>g});var t=a(58168),r=(a(96540),a(15680));const l={title:"Examples",date:new Date("2022-09-22T00:00:00.000Z"),sidebar_position:4},s="Configuration examples",i={unversionedId:"configuration/examples",id:"configuration/examples",title:"Examples",description:"Examples for actions",source:"@site/docs/configuration/examples.md",sourceDirName:"configuration",slug:"/configuration/examples",permalink:"/docs/configuration/examples",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/configuration/examples.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Examples",date:"2022-09-22T00:00:00.000Z",sidebar_position:4},sidebar:"autogenerated",previous:{title:"Actions",permalink:"/docs/configuration/actions"},next:{title:"Retriggering",permalink:"/docs/retriggering"}},o={},g=[{value:"Examples for actions",id:"examples-for-actions",level:2},{value:"Getting version",id:"getting-version",level:3},{value:"Manipulating spec file",id:"manipulating-spec-file",level:3},{value:"Custom archive creation for SRPM",id:"custom-archive-creation-for-srpm",level:3},{value:"Custom archive creation for release syncing",id:"custom-archive-creation-for-release-syncing",level:3},{value:"Custom changelog generation",id:"custom-changelog-generation",level:3},{value:"Examples for jobs",id:"examples-for-jobs",level:2},{value:"Builds",id:"builds",level:3},{value:"Tests",id:"tests",level:3},{value:"Fedora release automation",id:"fedora-release-automation",level:3},{value:"Get inspired",id:"get-inspired",level:2}],u={toc:g},p="wrapper";function m(e){let{components:n,...a}=e;return(0,r.yg)(p,(0,t.A)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"configuration-examples"},"Configuration examples"),(0,r.yg)("h2",{id:"examples-for-actions"},"Examples for actions"),(0,r.yg)("p",null,"You can find detailed documentation for actions ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/actions"},"here"),"."),(0,r.yg)("h3",{id:"getting-version"},"Getting version"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Getting version from specfile"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"get-current-version:\n  - grep -oP '^Version:\\s+\\K\\S+' my-package.spec\n")),(0,r.yg)("p",null,"or with a command from ",(0,r.yg)("inlineCode",{parentName:"p"},"rpm-build")," package that will honor the macros:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'get-current-version:\n  - rpmspec -q --queryformat "%{VERSION}\\n" --srpm *spec\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Getting version for Python packages with setup.py"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"get-current-version:\n  - python3 setup.py --version\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Getting version for Ruby packages from the gemspec"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"get-current-version:\n  - ruby -rrubygems -e 'puts Gem::Specification::load(Dir.glob(\"*.gemspec\").first).version'\n"))),(0,r.yg)("h3",{id:"manipulating-spec-file"},"Manipulating spec file"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Downloading specfile from the dist-git repo"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'post-upstream-clone:\n  - "wget https://src.fedoraproject.org/rpms/my-package/raw/main/f/my-package.spec -O my-package.spec"\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Setting the Sources correctly in case of multiple Sources"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'fix-spec-file:\n  # define one of the Source variables correctly\n  - sed -i my_specfile_path -e "s/https.*only-vendor.tar.xz/my_correct_tarball_path/"\n  # fill in %release as if packit would have done it\n  - bash -c "sed -i my_specfile_path -r \\"s/Release:(\\s*)\\S+/Release:\\1${PACKIT_RPMSPEC_RELEASE}%{?dist}/\\""\n'))),(0,r.yg)("h3",{id:"custom-archive-creation-for-srpm"},"Custom archive creation for SRPM"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating archive with custom make target"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'create-archive:\n  - make release\n  - bash -c "ls -1t ./my-package-*.tar.gz | head -n 1"\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating archive for Python packages with setup.py"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'create-archive:\n  - python3 setup.py sdist --dist-dir .\n  - bash -c "ls -1t ./my-package-*.tar.gz | head -n 1"\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating archive with git submodules"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"create-archive:\n  - git submodule update --init\n  # Create an archive file with the \u2039pkg\u203a directory prefix\n  - bash -c 'git ls-files --recurse-submodules | tar --transform \"s|^|pkg/|\" -caf .packit/pkg.tar.gz -T-'\n  - echo '.packit/pkg.tar.gz'\n"))),(0,r.yg)("h3",{id:"custom-archive-creation-for-release-syncing"},"Custom archive creation for release syncing"),(0,r.yg)("p",null,"If you need to generate local archive(s) during release syncing, you can utilise e.g. ",(0,r.yg)("inlineCode",{parentName:"p"},"pre-sync")," action\nto place the commands necessary for the creation. You also have to include the archive(s) in the list of files to\nbe moved to the dist-git repo so that it is then handled by Packit from there. ",(0,r.yg)("strong",{parentName:"p"},"Note:")," Beware of how Packit uploads\nfiles to lookaside cache or adds them to dist-git (see ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/#files_to_sync"},"this note")," for more details)."),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating an archive using tito and syncing it to dist-git repo"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'actions:\n  pre-sync:\n    - tito build -o . --tgz\n\nfiles_to_sync:\n  - src:\n    - "<my-package>-*.tar.gz"\n    dest: .\n'))),(0,r.yg)("h3",{id:"custom-changelog-generation"},"Custom changelog generation"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Using file content as a changelog entry"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"changelog-entry:\n  - cat .changelog_entry\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Using `git log` output as a changelog entry "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"changelog-entry:\n  - bash -c 'git log --no-merges --pretty=\"format:- %s (%an)\" $(git describe --tags --abbrev=0 ${PACKIT_PROJECT_UPSTREAM_TAG}^)..${PACKIT_PROJECT_UPSTREAM_TAG} --'\n"))),(0,r.yg)("h2",{id:"examples-for-jobs"},"Examples for jobs"),(0,r.yg)("p",null,"You can find detailed documentation for jobs ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration#supported-jobs"},"here"),"."),(0,r.yg)("h3",{id:"builds"},"Builds"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running builds in Copr for all pull requests"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running builds in Copr for pull requests with 'main' target branch"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  branch: main\n  targets:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running builds in custom Copr project for pushes to 'main'"),(0,r.yg)("p",null,"Configuring building in Copr project ",(0,r.yg)("inlineCode",{parentName:"p"},"@oamg/convert2rhel"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'- job: copr_build\n  trigger: commit\n  branch: main\n  owner: "@oamg"\n  project: convert2rhel\n  targets:\n    - epel-6-x86_64\n    - epel-7-x86_64\n    - epel-8-x86_64\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running more types of builds in Copr"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'jobs:\n- job: copr_build\n  trigger: pull_request\n  identifier: fedora\n  targets:\n    - fedora-all\n    \n- job: copr_build \n  trigger: pull_request\n  specfile_path: epel8/python-specfile.spec\n  identifier: epel8\n  actions:\n    create-archive:\n      - python3 setup.py sdist --dist-dir ./epel8/\n      - bash -c "ls -1t ./epel8/*.tar.gz | head -n 1"\n  targets:\n    - epel-8\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running builds in Koji for all pull requests"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: upstream_koji_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running builds in Koji for pull requests with 'main' target branch"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: upstream_koji_build\n  trigger: pull_request\n  branch: main\n  targets:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Utilising custom failure message"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n  notifications:\n    failure_comment:\n      message: >\n        Some builds failed for commit {commit_sha}.\n        @admin, please check."\n'))),(0,r.yg)("h3",{id:"tests"},"Tests"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running tests in Testing Farm for all pull requests"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n     \n- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running tests in Testing Farm for pull requests with 'main' target branch"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  branch: main\n  targets:\n    - fedora-all\n     \n- job: tests\n  trigger: pull_request\n  branch: main\n  targets:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running tests in internal Testing Farm instance"),(0,r.yg)("p",null,"Please, let us know if you want to use the internal Testing Farm;\nwe have to enable it for you."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  targets:\n    - epel-8-x86_64\n    \n- job: tests\n  trigger: pull_request\n  targets:\n    epel-8-x86_64:\n      distros: [RHEL-8.8.0-Nightly]\n  use_internal_tf: True\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running only tests (without builds)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n  skip_build: True\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Defining mapping between build and test targets"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  targets:\n    - epel-7-x86_64\n    - epel-8-x86_64\n    \n- job: tests\n  trigger: pull_request\n  targets:\n    epel-7-x86_64:\n      distros: [centos-7, oraclelinux-7]\n    epel-8-x86_64:\n      distros: [centos-8, oraclelinux-8]\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Specifying where the FMF metadata are placed in the current repository"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n  fmf_path: .distro/tmt\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Specifying where the FMF metadata are placed outside the current repository"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n    \n- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n  fmf_url: "https://gitlab.cee.redhat.com/baseos-qe/tmt.git"\n  fmf_ref: main\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running more types of tests with different settings"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'jobs:\n- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n    \n- job: tests\n  trigger: pull_request\n  identifier: "postgres-12-pgoutput"\n  targets:\n    - fedora-all\n  tf_extra_params:\n    test:\n      tmt:\n        name: postgres\n    environments:\n      - variables:\n          POSTGRESQL_VERSION: 12\n          DECODER_PLUGIN: pgoutput\n\n\n- job: tests\n  trigger: pull_request\n  identifier: "postgres-15-decoderbufs"\n  targets:\n    - fedora-all\n  tf_extra_params:\n    test:\n      tmt:\n        name: postgres\n    environments:\n      - variables:\n          POSTGRESQL_VERSION: 15\n          DECODER_PLUGIN: decoderbufs\n\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Extending timeout of a test pipeline for 24 hours (default is 12 hours)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'- job: tests\n  trigger: pull_request\n  identifier: "performance"\n  targets:\n    - centos-stream-9-x86_64\n  skip_build: true\n  manual_trigger: true\n  labels:\n    - performance\n  tf_extra_params:\n    settings:\n      pipeline:\n        timeout: 1440\n    test:\n      tmt:\n        name: performance\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Providing custom tmt context"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n     \n- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n  tf_extra_params:\n    environments:\n      - tmt:\n          context:\n            how: "full"\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Tag cloud resources in Testing Farm"),(0,r.yg)("p",null,"Tag cloud resources in Testing Farm to a specific Red Hat team or a project. If you are not a Red Hat employee, this section is not relevant for you.\nMake sure to update ",(0,r.yg)("inlineCode",{parentName:"p"},"sst_change_me")," to your RHEL SST name or name\nof the project. If not set, cloud costs are reported against\n",(0,r.yg)("inlineCode",{parentName:"p"},"Packit Service"),". The ",(0,r.yg)("inlineCode",{parentName:"p"},"BusinessUnit")," key name is required, please\ndo not change it."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n    \n- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n  # Tag cloud resources for tmt\n  tf_extra_params:\n    environments:\n      - settings:\n          provisioning:\n            tags:\n              BusinessUnit: sst_change_me\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Providing additional Testing Farm artifacts"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n     \n- job: tests\n  trigger: pull_request\n  targets:\n    - fedora-all\n  tf_extra_params:\n    environments:\n      - artifacts:\n          - type: repository\n            id: https://my.repo/repository\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Utilising custom failure message"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'- job: copr_build\n  trigger: pull_request\n  targets:\n    - fedora-all\n     \n- job: tests\n  identifier: revdeps\n  trigger: pull_request\n  targets:\n    - fedora-all\n  notifications:\n    failure_comment:\n      message: >\n        Reverse dep tests failed for commit {commit_sha}.\n        @admin, please check."\n\n'))),(0,r.yg)("h3",{id:"fedora-release-automation"},"Fedora release automation"),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating dist-git pull requests on upstream releases"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: propose_downstream\n  trigger: release\n  dist_git_branches: \n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating dist-git pull requests on upstream releases defined in the dist-git repository"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"upstream_project_url: https://github.com/packit/packit\n\njobs:\n- job: pull_from_upstream\n  trigger: release\n  dist_git_branches: \n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating dist-git pull requests on upstream releases matching specified tag pattern defined in the dist-git repository"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'upstream_project_url: https://github.com/packit/packit\n\njobs:\n- job: pull_from_upstream\n  trigger: release\n  dist_git_branches: \n    - fedora-all\n  upstream_tag_include: "^2\\\\..+"\n  upstream_tag_exclude: "^.+\\\\.1\\\\..+"\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating dist-git pull requests on upstream releases with different configs for branches defined in the dist-git repository"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'upstream_project_url: https://github.com/packit/packit\n\njobs:\n- job: pull_from_upstream\n  trigger: release\n  dist_git_branches: \n    - fedora-38\n  upstream_tag_include: "^2\\\\..+"\n  upstream_tag_exclude: "^.+\\\\.1\\\\..+"\n  \n- job: pull_from_upstream\n  trigger: release\n  dist_git_branches: \n    - fedora-rawhide\n'))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating dist-git pull requests on upstream releases with custom spec file manipulation (e.g. rust2rpm)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"actions:\n  prepare-files:\n    # override Packit default spec file manipulation and update the spec file with rust2rpm\n    - bash -c 'cd $PACKIT_DOWNSTREAM_REPO && rust2rpm --no-existence-check --store-crate @$PACKIT_PROJECT_VERSION'\n\njobs:\n- job: pull_from_upstream\n  trigger: release\n  dist_git_branches: \n    - fedora-rawhide\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running Koji builds when the Packit pull requests in dist-git are merged"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: koji_build\n  trigger: commit\n  dist_git_branches:\n    - fedora-all\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Running Koji builds as a reaction to merging PRs or committing in dist-git by specified users"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: koji_build\n  trigger: commit\n  dist_git_branches:\n    - fedora-all\n  allowed_pr_authors:\n    - packit\n    - the-fas-username-to-allow\n  allowed_committers:\n    - packit\n    - another-fas-username-to-allow\n"))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Creating Bodhi updates automatically for successful Koji builds"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"- job: bodhi_update\n  trigger: commit\n  dist_git_branches:\n    - fedora-branched # rawhide updates are created automatically\n"))),(0,r.yg)("h2",{id:"get-inspired"},"Get inspired"),(0,r.yg)("p",null,"You can also look directly into configuration files of some other projects using Packit:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/systemd/systemd/blob/main/.packit.yml"},"Systemd")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/rhinstaller/anaconda/blob/master/.packit.yml"},"Anaconda")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/packit/ogr/blob/main/.packit.yaml"},"Ogr")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/oamg/convert2rhel/blob/main/.packit.yaml"},"Convert2rhel")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/cockpit-project/cockpit/blob/main/packit.yaml"},"Cockpit project")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/teemtee/tmt/blob/main/.packit.yaml"},"Tmt")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/osbuild/osbuild-composer/blob/main/.packit.yaml"},"Osbuild")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/oamg/leapp-repository/blob/master/.packit.yaml"},"Leapp repository"))))}m.isMDXComponent=!0}}]);