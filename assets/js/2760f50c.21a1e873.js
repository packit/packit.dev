"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[2926],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(r),h=o,d=u["".concat(c,".").concat(h)]||u[h]||m[h]||a;return r?n.createElement(d,i(i({ref:t},p),{},{components:r})):n.createElement(d,i({ref:t},p))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},37374:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=r(87462),o=(r(67294),r(3905));const a={title:"Automotive clusters",authors:"jpopelka"},i=void 0,s={unversionedId:"deployment/automotive-rosa",id:"deployment/automotive-rosa",title:"Automotive clusters",description:"The Automotive initiative uses Red Hat OpenShift Service on AWS (ROSA) for their clusters.",source:"@site/research/deployment/automotive-rosa.md",sourceDirName:"deployment",slug:"/deployment/automotive-rosa",permalink:"/research/deployment/automotive-rosa",draft:!1,editUrl:"https://github.com/packit/research/tree/main/research/deployment/automotive-rosa.md",tags:[],version:"current",frontMatter:{title:"Automotive clusters",authors:"jpopelka"},sidebar:"autogenerated",previous:{title:"Automation for moving the stable branches",permalink:"/research/deployment/automation-for-stable-branches"},next:{title:"Deploy a testing instance",permalink:"/research/deployment/deploy-packit-pr"}},c={},l=[{value:"Staging packit-service @ test cluster",id:"staging-packit-service--test-cluster",level:2}],p={toc:l},u="wrapper";function m(e){let{components:t,...r}=e;return(0,o.kt)(u,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The Automotive initiative uses ",(0,o.kt)("a",{parentName:"p",href:"https://docs.openshift.com/rosa"},"Red Hat OpenShift Service on AWS (ROSA)")," for their clusters."),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://gitlab.cee.redhat.com/c-team/monaco"},"this internal repo")," for Infrastructure as Code definitions."),(0,o.kt)("p",null,"They gave us access to their test cluster - creds are in ",(0,o.kt)("a",{parentName:"p",href:"https://gitlab.cee.redhat.com/user-cont/packit-service"},"our internal repo"),"."),(0,o.kt)("p",null,"There's also ",(0,o.kt)("a",{parentName:"p",href:"https://drive.google.com/file/d/1ROw7owiF47GAE1TaQ7i6fV5ZStbkdVgF"},"a recording")," of a intro that Hubert Stefanski gave us."),(0,o.kt)("p",null,"For communication use ",(0,o.kt)("inlineCode",{parentName:"p"},"packit-auto-shared-infra")," internal chat and/or google group."),(0,o.kt)("h2",{id:"staging-packit-service--test-cluster"},"Staging packit-service @ test cluster"),(0,o.kt)("p",null,"A new ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/packit/deployment"},"deployment")," of staging instance of packit-service to the test cluster went flawlessly."),(0,o.kt)("p",null,"All microservices work OK, the only hiccup we've seen is with PostgreSQL which is working intermittently.\nThe readiness probe sometime fails and/or a query via SQLAlchemy ofter returns\n\"server closed the connection unexpectedly\" even when the readiness probe is\nturned off so the probe can't be the cause per se."),(0,o.kt)("p",null,"When one runs ",(0,o.kt)("inlineCode",{parentName:"p"},"watch pg_isready")," in the pod's terminal, the outages are\nmysteriously gone and don't show up any more even when the watch is later stopped.\nThe readiness probe also calls the ",(0,o.kt)("inlineCode",{parentName:"p"},"pg_isready")," periodically via\n",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/libexec/check-container"),", but it doesn't have the same effect as\nrunning it manually in the terminal."),(0,o.kt)("p",null,"(author of these letters owe you a beer six pack if you can help shed some light on this mystery)"))}m.isMDXComponent=!0}}]);