"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[71108],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=s(a),u=r,d=m["".concat(p,".").concat(u)]||m[u]||h[u]||i;return a?n.createElement(d,l(l({ref:t},c),{},{components:a})):n.createElement(d,l({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},13889:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var n=a(87462),r=(a(67294),a(3905));const i={title:"Updates of source-git repos (archived)",authors:"flachman"},l=void 0,o={unversionedId:"source-git/dist-git-to-src-git/updates",id:"source-git/dist-git-to-src-git/updates",title:"Updates of source-git repos (archived)",description:"This research is outdated and replaced by research packit source-git update-source-git.",source:"@site/research/source-git/dist-git-to-src-git/updates.md",sourceDirName:"source-git/dist-git-to-src-git",slug:"/source-git/dist-git-to-src-git/updates",permalink:"/research/source-git/dist-git-to-src-git/updates",draft:!1,editUrl:"https://github.com/packit/research/tree/main/research/source-git/dist-git-to-src-git/updates.md",tags:[],version:"current",frontMatter:{title:"Updates of source-git repos (archived)",authors:"flachman"},sidebar:"autogenerated",previous:{title:"Converting dist-git to source-git",permalink:"/research/source-git/dist-git-to-src-git/"},next:{title:"Fedora package candidates for source-git",permalink:"/research/source-git/fedora-spec-files/"}},p={},s=[{value:"Problem",id:"problem",level:2},{value:"What can differ when going back to the dist-git structure?",id:"what-can-differ-when-going-back-to-the-dist-git-structure",level:3},{value:"Proposal 1",id:"proposal-1",level:2},{value:"New changes",id:"new-changes",level:3},{value:"Reverse",id:"reverse",level:3},{value:"Saving metadata",id:"saving-metadata",level:3},{value:"Conclusion of proposal 1",id:"conclusion-of-proposal-1",level:3},{value:"Proposal 2",id:"proposal-2",level:2},{value:"Conclusion of proposal 2",id:"conclusion-of-proposal-2",level:3}],c={toc:s},m="wrapper";function h(e){let{components:t,...i}=e;return(0,r.kt)(m,(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This research is outdated and replaced by ",(0,r.kt)("a",{parentName:"p",href:"/research/source-git/update"},"research ",(0,r.kt)("inlineCode",{parentName:"a"},"packit source-git update-source-git")),"."),(0,r.kt)("h2",{id:"problem"},"Problem"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We need to convert new dist-git commits to the existing source-git repository."),(0,r.kt)("li",{parentName:"ul"},"The changes need to be reversible.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"=> We need to get back to the dist-git structure from the source-git."))),(0,r.kt)("li",{parentName:"ul"},"Possible changes:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"changes in the packaging files (not in spec-file, not in patch files; e.g. config-files)"),(0,r.kt)("li",{parentName:"ul"},"general changes in the spec-file (e.g. new release, new dependency, fixing a packaging problem)"),(0,r.kt)("li",{parentName:"ul"},"change in patches:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"patch added"),(0,r.kt)("li",{parentName:"ul"},"patch edited"),(0,r.kt)("li",{parentName:"ul"},"patch removed"))))),(0,r.kt)("li",{parentName:"ul"},"Patches can be applied conditionally (or even manually)."),(0,r.kt)("li",{parentName:"ul"},"Users can help with the sync. (Review and tweak the change.)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Note from the demo meeting.\nFor some users, it is not a problem to be able to make source-git generating locally.\nThey can review (and potentially) improve/correct the result."),(0,r.kt)("li",{parentName:"ul"},"Do we want to allow it? How can we do it to no break the workflow?"))),(0,r.kt)("li",{parentName:"ul"},"No force-push possible.")),(0,r.kt)("h3",{id:"what-can-differ-when-going-back-to-the-dist-git-structure"},"What can differ when going back to the dist-git structure?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Be able to create the "same" ',(0,r.kt)("inlineCode",{parentName:"li"},"RPM"),' file? What is "same"?'),(0,r.kt)("li",{parentName:"ul"},"Can spec-file differ? e.g. different patch names, comments",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Does the result have to be readable?"),(0,r.kt)("li",{parentName:"ul"},"Is it a problem to have really high number of technical patches without sense?")))),(0,r.kt)("h2",{id:"proposal-1"},"Proposal 1"),(0,r.kt)("h3",{id:"new-changes"},"New changes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When changing the patches save the line index and patch name with the commit\n(saving itself is described bellow)."),(0,r.kt)("li",{parentName:"ul"},"Create a new source-git commit:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"patch added:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"convert patch to source changes"),(0,r.kt)("li",{parentName:"ul"},"save ",(0,r.kt)("inlineCode",{parentName:"li"},'{"patch": "name.patch", index=42}')," with the commit"),(0,r.kt)("li",{parentName:"ul"},"comment out the line with the patch"))),(0,r.kt)("li",{parentName:"ul"},"patch removed:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"invert the patch and convert to the changes"),(0,r.kt)("li",{parentName:"ul"},"save ",(0,r.kt)("inlineCode",{parentName:"li"},'{"patch": "name.patch", index=-42}')," with the commit"),(0,r.kt)("li",{parentName:"ul"},"remove the line with the patch"))),(0,r.kt)("li",{parentName:"ul"},"patch edited:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"convert patch diff to source changes",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"diff of patches / revert+new change"))),(0,r.kt)("li",{parentName:"ul"},"save ",(0,r.kt)("inlineCode",{parentName:"li"},'{"patch": "name.patch", index=42}')," with the commit"),(0,r.kt)("li",{parentName:"ul"},"line with patch should be already commented")))))),(0,r.kt)("h3",{id:"reverse"},"Reverse"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When going back from commit to patch:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"In case of commit without metadata:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Generate a patch file and add it to the spec-file."))),(0,r.kt)("li",{parentName:"ul"},"In case of ",(0,r.kt)("inlineCode",{parentName:"li"},"index >= 0")," in the metadata:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Check the existence of the ",(0,r.kt)("inlineCode",{parentName:"li"},"name.patch"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If not present:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Uncomment the ",(0,r.kt)("inlineCode",{parentName:"li"},"index")," line in the spec-file."),(0,r.kt)("li",{parentName:"ul"},"Generate ",(0,r.kt)("inlineCode",{parentName:"li"},"name.patch")," from the commit."))),(0,r.kt)("li",{parentName:"ul"},"If present:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Generate a new path from the commit and merge it into ",(0,r.kt)("inlineCode",{parentName:"li"},"name.patch"),"."))))))),(0,r.kt)("li",{parentName:"ul"},"In case of ",(0,r.kt)("inlineCode",{parentName:"li"},"index == -42"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Remove the ",(0,r.kt)("inlineCode",{parentName:"li"},"name.patch"),"."),(0,r.kt)("li",{parentName:"ul"},"Remove the line ",(0,r.kt)("inlineCode",{parentName:"li"},"42")," in the spec-file.")))))),(0,r.kt)("h3",{id:"saving-metadata"},"Saving metadata"),(0,r.kt)("p",null,"We have various way, how to save metadata for regeneration:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enhance packit config file:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2795 editable by users"),(0,r.kt)("li",{parentName:"ul"},"\u2795 can be seen/reviewed"),(0,r.kt)("li",{parentName:"ul"},"\u2795 preserved between git commits"),(0,r.kt)("li",{parentName:"ul"},"\u2796 is not connected with the commit (the mapping can be added)"))),(0,r.kt)("li",{parentName:"ul"},"git note (see ",(0,r.kt)("a",{parentName:"li",href:"/research/git-notes"},"Git Notes research")," for more info):",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2795 attached to the git commit"),(0,r.kt)("li",{parentName:"ul"},"\u2795 can be changed, but not so easily as a regular file"),(0,r.kt)("li",{parentName:"ul"},"\u2796 not preserved between git commits (easier usage if we use it together with second proposal)"),(0,r.kt)("li",{parentName:"ul"},"\u2796 not pulled automatically"))),(0,r.kt)("li",{parentName:"ul"},"git-message",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"We can have strict format of the git-message (e.g. yaml)."),(0,r.kt)("li",{parentName:"ul"},"\u2795 attached to the git commit"),(0,r.kt)("li",{parentName:"ul"},"\u2795 pulled automatically"),(0,r.kt)("li",{parentName:"ul"},"\u2796 if we need to extend the info, we can loose readability"),(0,r.kt)("li",{parentName:"ul"},"\u2796 not preserved between git commits (easier usage if we use it together with second proposal)"),(0,r.kt)("li",{parentName:"ul"},"\u2049 cannot be edited when pushed"),(0,r.kt)("li",{parentName:"ul"},"Will be read by users => users can not like it."),(0,r.kt)("li",{parentName:"ul"},"If we want to allow users to write it as well,\nwe need to have some wrapper on top of git to ease that."))),(0,r.kt)("li",{parentName:"ul"},"other file",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2795 editable by users"),(0,r.kt)("li",{parentName:"ul"},"\u2795 can be seen/reviewed"),(0,r.kt)("li",{parentName:"ul"},"\u2795 preserved between git commits"),(0,r.kt)("li",{parentName:"ul"},"\u2796 is not connected with the commit"),(0,r.kt)("li",{parentName:"ul"},"\u2796 another file")))),(0,r.kt)("h3",{id:"conclusion-of-proposal-1"},"Conclusion of proposal 1"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We need to add metadata to the source-git commits.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Can be used for other information."),(0,r.kt)("li",{parentName:"ul"},"Depending on the saving mechanism (above) it can reduce/break the usual git usage."))),(0,r.kt)("li",{parentName:"ul"},"\u2795 The git history is clear."),(0,r.kt)("li",{parentName:"ul"},"\u2796 A lot of work needs to be done.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Multiple scenarios; lot of corner cases."))),(0,r.kt)("li",{parentName:"ul"},"\u2796 It will be hard to correct/improve the workflow."),(0,r.kt)("li",{parentName:"ul"},"\u2795 Reverted dist-git still preserves the conditions, naming and location of the patches."),(0,r.kt)("li",{parentName:"ul"},"\u2796 Generated source-git will contain all the patches.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Various improvements and strategies possible and doable later\n(e.g. avoid both of if-else branches, expand macros before getting of the patches).")))),(0,r.kt)("h2",{id:"proposal-2"},"Proposal 2"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Easy solution that mimics the history overwriting without force push.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"There are multiple ways, how to do this:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"(I) Regenerate the source-git from scratch and use\n",(0,r.kt)("a",{parentName:"p",href:"https://git-scm.com/docs/merge-strategieshttps://git-scm.com/docs/merge-strategies"},"ours"),"\nmerging strategy to merge the new version on top of the old version ignoring its content.\n(Packit does not work now with upstream-ref outside of the linear history.)"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"git-merge-ours",src:a(81901).Z,width:"1015",height:"1353"}),"\n",(0,r.kt)("img",{alt:"git-merge-ours-with-comments",src:a(59910).Z,width:"1015",height:"1353"}),"\n",(0,r.kt)("img",{alt:"git-merge-ours-new",src:a(40586).Z,width:"1015",height:"1353"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"(II) Use force checkout the content instead of merge to have regular commit instead of the head one."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"git-force-checkout",src:a(94437).Z,width:"1015",height:"1353"})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# generate new source-git to `rpm-4.14.2-36.el8` branch starting on master\ngit checkout c8s\ngit checkout -f rpm-4.14.2-36.el8 -- .\n# use the `sg-start-rpm-4.14.2-25.el8` as upstream-ref in config\n# (use the old one => revert that change)\ngit commit -m "Update from distgit"\n')),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"* d3ec53a - Update from distgit (c8s)\n* 9eba783 - Apply Patch1002: rpm-4.14.2-unversioned-python.patch (rpm-4.14.2-25.el8)\n* 9609ba3 - Compile with Platform-Python binary where relevant\n:\n* 5513f1d - Apply Patch1: rpm-4.11.x-siteconfig.patch\n* ce19f5d - Downstream spec with commented patches (tag: sg-start-rpm-4.14.2-25.el8)\n* 7c6a6b1 - .packit.yaml\n* 49dd86b - Unpack archive\n* fbcb954 - init (master)\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"commit d3ec53a11e62cb01252ddd166864e1b9ed6a84e1 (HEAD -> c8s)\nAuthor: Frantisek Lachman <flachman@redhat.com>\nDate:   Thu Jun 11 09:35:01 2020 +0200\n\n    Update from distgit\n\n    Signed-off-by: Frantisek Lachman <flachman@redhat.com>\n\n SPECS/rpm.spec                   |  69 +++++++++-\n build/files.c                    |  31 ++++-\n build/pack.c                     |  34 ++++-\n :\n tools/debugedit.c                | 584 +++++++++++++++++++++++++++++++++++++++++++++++++++++-------------------------\n 26 files changed, 628 insertions(+), 270 deletions(-)\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ packit srpm\nInput directory is an upstream repository.\n100%[=============================>]     3.96M  eta 00:00:00\n44 patches added to '/home/flachman/Projects/git.centos.org/src/rpm/SPECS/rpm.spec'.\nSRPM: /home/flachman/Projects/git.centos.org/src/rpm/rpm-4.14.2-37.gd3ec53a1.fc32.src.rpm\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"(III) Another alternative is to revert to the initial commit\n(we should start with some neutral state) and rerun the generation script.\nThis will have upstream tag in the right place and will have a linear history."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"git-revert-to-init-1",src:a(39495).Z,width:"1015",height:"1353"}),"\n",(0,r.kt)("img",{alt:"git-revert-to-init-2",src:a(43674).Z,width:"1015",height:"1353"})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"* 46b055b - Apply Patch1002: rpm-4.14.2-unversioned-python.patch (c8s)\n* f20e0c9 - Compile with Platform-Python binary where relevant\n* 5f7b687 - Apply Patch1000: disable-python-extra.patch\n:\n* 41f0dd8 - Apply Patch1: rpm-4.11.x-siteconfig.patch\n* 0488837 - Downstream spec with commented patches (tag: sg-start-rpm-4.14.2-36.el8)\n* 3cf64a9 - .packit.yaml\n* ef4b7f6 - Unpack archive\n* 3bbc954 - revert-to-init\n* 9eba783 - Apply Patch1002: rpm-4.14.2-unversioned-python.patch\n* 9609ba3 - Compile with Platform-Python binary where relevant\n* a43a233 - Apply Patch1000: disable-python-extra.patch\n:\n* 5513f1d - Apply Patch1: rpm-4.11.x-siteconfig.patch\n* ce19f5d - Downstream spec with commented patches (tag: sg-start-rpm-4.14.2-25.el8)\n* 7c6a6b1 - .packit.yaml\n* 49dd86b - Unpack archive\n* fbcb954 - init (master)\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ git diff 9eba783 46b055b --stat\n.packit.yaml                                                                                                                               |      2 +-\n SPECS/0001-Unpack-archive.patch                                                                                                            | 696860 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n SPECS/{0001-Apply-Patch1-rpm-4.11.x-siteconfig.patch.patch => 0002-Apply-Patch1-rpm-4.11.x-siteconfig.patch.patch}                         |      6 +-\n SPECS/{0002-Apply-Patch2-rpm-4.13.0-fedora-specspo.patch.patch => 0003-Apply-Patch2-rpm-4.13.0-fedora-specspo.patch.patch}                 |      6 +-\n SPECS/{0003-Apply-Patch3-rpm-4.9.90-no-man-dirs.patch.patch => 0004-Apply-Patch3-rpm-4.9.90-no-man-dirs.patch.patch}                       |      6 +-\n :\n SPECS/0044-Use-newline-as-a-delimiter-to-avoid-xargs-messing-up.patch                                                                      |     26 -\n SPECS/0045-Make-check-buildroot-check-the-build-files-in-parall.patch                                                                      |     31 -\n :\n rpm-4.14.2-38.g9b8c91d8.fc32.src.rpm => SPECS/rpm-4.14.2.tar.bz2                                                                           |    Bin 4251502 -> 4151934 bytes\n SPECS/rpm-4.14.3.tar.bz2                                                                                                                   |    Bin 0 -> 5059526 bytes\n SPECS/rpm.spec                                                                                                                             |     69 +-\n build/files.c                                                                                                                              |     31 +-\n :                                                                                                                         |    584 +-\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ packit srpm\nInput directory is an upstream repository.\n44 patches added to '/home/flachman/Projects/git.centos.org/src/rpm/SPECS/rpm.spec'.\nSRPM: /home/flachman/Projects/git.centos.org/src/rpm/rpm-4.14.2-37.gd3ec53a1.fc32.src.rpm\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"We need to make sure that we go by the correct branch when reverting the content to the dist-git style."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Saving metadata (like above) can help us with that.")))),(0,r.kt)("h3",{id:"conclusion-of-proposal-2"},"Conclusion of proposal 2"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Final git tree:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"version (I)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2796 Packit does not work with ",(0,r.kt)("inlineCode",{parentName:"li"},"upstream-ref")," in merged branch"),(0,r.kt)("li",{parentName:"ul"},"\u2795 We can still see the history of all generated source-gits."),(0,r.kt)("li",{parentName:"ul"},"\u2796 A lot of branches around."))),(0,r.kt)("li",{parentName:"ul"},"version (II)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2796 The old source-git history in the git history can be outdated.\n(Still contains the commits from the first run.)"),(0,r.kt)("li",{parentName:"ul"},"\u2796 We loose the history about creation of new source-git."),(0,r.kt)("li",{parentName:"ul"},"\u2795 Git history is clear. Just one new commit.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Effectivelly, same content as the manual approach."))))),(0,r.kt)("li",{parentName:"ul"},"version (III)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2795 contains the last source-git generation history"),(0,r.kt)("li",{parentName:"ul"},"\u2796 lots of unnecessary commits from the last runs, that are reverted each time"))))),(0,r.kt)("li",{parentName:"ul"},"\u2795 Source-git generation can be improved on the flow.\n(We can do any rapid change without being scared of the future.)"),(0,r.kt)("li",{parentName:"ul"},"\u2795 Easy to implement."),(0,r.kt)("li",{parentName:"ul"},"\u2049 We still need to save metadata to fix problems like conditional patching."),(0,r.kt)("li",{parentName:"ul"},"\u2049 Conditional patching can be solved in the generation script.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"We can theoretically generate multiple variants and let the user pick the correct one.")))))}h.isMDXComponent=!0},94437:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/git-force-checkout-c2e0e24cd97cbca2b8c3030bd984ddce.jpg"},40586:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/git-merge-ours-new-4660d71947df31f2c7b57e19aa41a1de.jpg"},59910:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/git-merge-ours-with-comments-ce746975493e0ba0696f6df6024897ad.jpg"},81901:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/git-merge-ours-fdb835cdb153f9446c147f13e2537947.jpg"},39495:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/git-revert-to-init-1-f92f53fd353287a6b3c7e8e93eee979f.jpg"},43674:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/git-revert-to-init-2-d0b3c118317b035c08c3426093093ad3.jpg"}}]);