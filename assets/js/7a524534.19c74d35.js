"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[1967],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(a),d=r,m=c["".concat(l,".").concat(d)]||c[d]||h[d]||o;return a?n.createElement(m,s(s({ref:t},p),{},{components:a})):n.createElement(m,s({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:r,s[1]=i;for(var u=2;u<o;u++)s[u]=a[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},17061:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var n=a(87462),r=(a(67294),a(3905));const o={title:"2021 for Packit",date:new Date("2022-01-12T08:23:38.000Z"),authors:"flachman",tags:[2021,"yearly-features","summary"]},s="Packit project in 2021",i={permalink:"/posts/2021-features",editUrl:"https://github.com/packit/packit.dev/tree/main/posts/2021-features/index.md",source:"@site/posts/2021-features/index.md",title:"2021 for Packit",description:"The previous year 2021 wasn't interesting only because of the increased usage of Packit",date:"2022-01-12T08:23:38.000Z",formattedDate:"January 12, 2022",tags:[{label:"2021",permalink:"/posts/tags/2021"},{label:"yearly-features",permalink:"/posts/tags/yearly-features"},{label:"summary",permalink:"/posts/tags/summary"}],readingTime:5.395,hasTruncateMarker:!0,authors:[{name:"Franti\u0161ek Lachman",email:"flachman@redhat.com",url:"https://github.com/lachmanfrantisek",imageURL:"https://github.com/lachmanfrantisek.png",key:"flachman"}],frontMatter:{title:"2021 for Packit",date:"2022-01-12T08:23:38.000Z",authors:"flachman",tags:["2021","yearly-features","summary"]},prevItem:{title:"Building SRPMs in Copr",permalink:"/posts/copr-srpms"},nextItem:{title:"2021 in Numbers",permalink:"/posts/2021-in-numbers"}},l={authorsImageUrls:[void 0]},u=[{value:"Dashboard",id:"dashboard",level:2},{value:"Future of the dashboard",id:"future-of-the-dashboard",level:3},{value:"Development",id:"development",level:2},{value:"Testing Farm",id:"testing-farm",level:2},{value:"Service",id:"service",level:2},{value:"Downstream",id:"downstream",level:2},{value:"Status Page",id:"status-page",level:2},{value:"Future",id:"future",level:2}],p={toc:u},c="wrapper";function h(e){let{components:t,...o}=e;return(0,r.kt)(c,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The previous year 2021 wasn't interesting only because of the increased usage of Packit\n(you can see more in ",(0,r.kt)("a",{parentName:"p",href:"/posts/2021-in-numbers"},"the previous post"),").\nThe whole Packit team made a lot of improvements during the year.\nSome small, some really big. So, let's take a look at the most important ones!"),(0,r.kt)("h2",{id:"dashboard"},"Dashboard"),(0,r.kt)("p",null,"The idea of having a dashboard for Packit service started as a\n",(0,r.kt)("a",{parentName:"p",href:"https://communityblog.fedoraproject.org/gsoc-progress-report-dashboard-for-packit-july-1-aug-16-2020/"},"Google Summer of Code 2020 project"),"\nto provide a basic view of our service.\nThanks ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/IceWreck"},"Anchit")," for starting this!\nNowadays, it's a core part of the project and it has replaced the result pages in plain HTML. Do you remember them?"),(0,r.kt)("p",null,"The dashboard can be found at ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.packit.dev"},"dashboard.packit.dev"),"."),(0,r.kt)("p",null,"Following picture shows a more convenient and visually-appealing view of builds and test runs.\nFor better context, the relevant pages are a connected to each other."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Dashboard: Copr Build result",src:a(94511).Z,width:"1085",height:"776"})),(0,r.kt)("p",null,"If you want to see the overall picture, use our ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.packit.dev/pipelines"},"pipelines view")," that was created exactly for that:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Dashboard: Pipelines view",src:a(653).Z,width:"1304",height:"721"})),(0,r.kt)("h3",{id:"future-of-the-dashboard"},"Future of the dashboard"),(0,r.kt)("p",null,"We consider our dashboard an important part of our service and are working on or planning more improvements:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We are working on personalised pages for a user or git-forge namespace."),(0,r.kt)("li",{parentName:"ul"},"We are planning to show info about other job types we support by the service as well;\nespecially the ",(0,r.kt)("inlineCode",{parentName:"li"},"propose-downstream")," one."),(0,r.kt)("li",{parentName:"ul"},"We are doing some database schema updates to be able to better interconnect various pages."),(0,r.kt)("li",{parentName:"ul"},"Do you have an idea for an improvement?\nLet us know by creating an issue ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/packit/dashboard/issues/new"},"here"),".")),(0,r.kt)("h2",{id:"development"},"Development"),(0,r.kt)("p",null,"From the very start, Packit is developed publicly in an open-source way.\nWe participate in various projects like Google Summer of Code, Red Hat Open Source Contest and Hacktoberfest.\nBut we are also very glad if anyone from our users contributes and fixes some pain point.\nTo help with that, we've renamed all our branches to ",(0,r.kt)("inlineCode",{parentName:"p"},"main")," and rapidly enhanced our contribution guide(s).\nWe would like to encourage you not to be afraid of contributing to any of ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/packit/"},"our projects"),".\nWe are prepared to help you with that."),(0,r.kt)("p",null,"If you want to keep an eye on what we are currently working on, check our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/orgs/packit/projects/4"},(0,r.kt)("em",{parentName:"a"},"Packit upstream work")," board on GitHub"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"GitHub: Packit upstream work",src:a(69934).Z,width:"1298",height:"276"})),(0,r.kt)("h2",{id:"testing-farm"},"Testing Farm"),(0,r.kt)("p",null,"The year 2021 was a tough one for our test workflow. For those who don't know, we use Testing Farm as our test runner.\nAt the beginning of the year, we switched to the new Testing Farm API version\n(because the old one had died with the infrastructure it had been running on).\nUnlike the old version, the new one fully supports ",(0,r.kt)("inlineCode",{parentName:"p"},"tmt")," as a test definition."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Testing Farm: results",src:a(45948).Z,width:"1369",height:"436"})),(0,r.kt)("p",null,"During the year, a set of supported environments was enhanced by ",(0,r.kt)("inlineCode",{parentName:"p"},"centos-6"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"oraclelinux")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"aarch64"),".\nFor Red Hat teams, we added support for using the internal instance of the Testing Farm.\nLet us know if you are interested in this.\nBut no worries, you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"centos-stream")," and other publicly available environments."),(0,r.kt)("p",null,"Originally, the tests were run after the installation of the packages built using Copr from the source repository.\nNewly, you can skip this step and run the tests without any build. This allows you to use Packit&TestingFarm\nfor repositories containing only test definitions (e.g. QE teams)."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Testing Farm: no build",src:a(13373).Z,width:"1309",height:"194"})),(0,r.kt)("p",null,"Lastly, we send some environment variables to the test environment and you can define your own if you want."),(0,r.kt)("p",null,"As we see, testing is a key feature for some teams and we still want to improve test use-cases\n-- let us know if you are missing anything (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/packit/packit-service/issues/new"},"here")," or\n",(0,r.kt)("a",{parentName:"p",href:"https://gitlab.com/groups/testing-farm/-/issues"},"in the Testing Farm issue tracker"),")."),(0,r.kt)("h2",{id:"service"},"Service"),(0,r.kt)("p",null,"To get users quickly know that we accepted the task and started working on it, we added two nice features\n-- ",(0,r.kt)("inlineCode",{parentName:"p"},":1")," reaction for the comment that we are reacting on and ",(0,r.kt)("inlineCode",{parentName:"p"},"task accepted")," commit status."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Packit Service: reactions",src:a(17407).Z,width:"950",height:"176"})),(0,r.kt)("p",null,"Speaking of statuses, we switched to a more feature-rich API called GitHub Check Runs.\nIt allows us to create a separate result page where we can show more information\n-- e.g. more links when needed and more space for hints when there is a problem.\nYou can also find the run results on a separate ",(0,r.kt)("inlineCode",{parentName:"p"},"Checks")," tab of the pull-requests page.\nThe check run page contains only the basic info and we don't want to replace a dashboard with this.\n(Because of the consistency between git-forges and to be able to link the related dashboard pages.)\nAnother feature of check runs you might find useful is being able to re-run the failed test with just one click\n(see the ",(0,r.kt)("inlineCode",{parentName:"p"},"Re-run")," button in the following screenshot)."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Check runs",src:a(1745).Z,width:"977",height:"384"})),(0,r.kt)("p",null,"Inspired by other systems (like Zuul), for pull-requests we started using merge state\nso you can be sure the state we use is the same as the one with the pull-request being merged.\nWe are working with the Testing Farm team to add the support there as well so the test definition is consistent with the build.\nBut no worries, you can disable this if you don't want this behaviour."),(0,r.kt)("h2",{id:"downstream"},"Downstream"),(0,r.kt)("p",null,"One of our current initiatives is to help maintainers in the downstream part of the workflow as well.\nWe had the first part of that for some time in a form of ",(0,r.kt)("inlineCode",{parentName:"p"},"propose-downstream")," job (you can expect more enhancements on this front),\nbut we newly support triggering Koji builds for new commits in dist-git."),(0,r.kt)("p",null,"When there is a new dist-git commit that contains Packit config with the defined ",(0,r.kt)("inlineCode",{parentName:"p"},"koji_build")," job,\nPackit will trigger the Koji build for you.\nIt's fresh and basic so far so give us some time to announce this with more details.\nThe next step will be to create a Bodhi update when the build successfully finishes and that is\nwhat is currently being worked on."),(0,r.kt)("h2",{id:"status-page"},"Status Page"),(0,r.kt)("p",null,"Yes, we have a status page where you can check if everything is ok with our service.\nIt can be found at ",(0,r.kt)("a",{parentName:"p",href:"https://status.packit.dev/"},"status.packit.dev"),"\nOn the page, you can find a list of incidents we resolved or are trying to fix.\nIf you don't see any incident and still think the service isn't working as expected, please,\nlet us know (see ",(0,r.kt)("a",{parentName:"p",href:"/#contact"},"contacts"),").\nAnother useful source of information is the ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.packit.dev/pipelines"},"pipelines view")," on our dashboard."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Packit Status Page: systems",src:a(23573).Z,width:"575",height:"652"}),"\n",(0,r.kt)("img",{alt:"Packit Status Page: incidents",src:a(53353).Z,width:"616",height:"697"})),(0,r.kt)("h2",{id:"future"},"Future"),(0,r.kt)("p",null,"As you see, we managed to accomplish a lot last year. And what you can expect this year?\n","[Let us know]",'({{< ref "faq#how-can-i-contact-you" >}}) if you have some ideas and want to influence that!'))}h.isMDXComponent=!0},1745:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/check-runs-a38bf2a5d1febf4d3933a066dec2696c.png"},94511:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dashboard-copr-1a172fb72c00bb1b71af74610fc8ce7d.png"},653:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dashboard-pipelines-03077187af2a61a8ab3a3fb1ed508d84.png"},69934:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/github-project-3606aa0b741a1835854a5cbfe59bcb15.png"},23573:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/status-1-161f9f8eab1e1c68007141a99dfda890.png"},53353:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/status-2-870fd2bf13f962a7dc8e9ce1198436b5.png"},45948:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/testing-farm-results-976b2fa2b8055708c9bca93336fdad33.png"},13373:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tf-no-build-9f7ecf53b820e6bfee6480256b97e69d.png"},17407:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/thumbs-up-5f8d2df5d24049a4154408995c65dad3.png"}}]);