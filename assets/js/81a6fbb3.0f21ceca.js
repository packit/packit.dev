"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[64370],{15680:(e,a,t)=>{t.d(a,{xA:()=>u,yg:()=>c});var r=t(96540);function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,r,i=function(e,a){if(null==e)return{};var t,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),p=function(e){var a=r.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},u=function(e){var a=p(e.components);return r.createElement(s.Provider,{value:a},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var t=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(t),m=i,c=d["".concat(s,".").concat(m)]||d[m]||g[m]||n;return t?r.createElement(c,o(o({ref:a},u),{},{components:t})):r.createElement(c,o({ref:a},u))}));function c(e,a){var t=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var n=t.length,o=new Array(n);o[0]=m;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<n;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},85717:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>n,metadata:()=>l,toc:()=>p});var r=t(58168),i=(t(96540),t(15680));const n={title:"Improvements",authors:"mfocko"},o="Dashboard Improvements",l={unversionedId:"ui/dashboard/dashboard-improvements",id:"ui/dashboard/dashboard-improvements",title:"Improvements",description:"Main points",source:"@site/research/ui/dashboard/dashboard-improvements.md",sourceDirName:"ui/dashboard",slug:"/ui/dashboard/dashboard-improvements",permalink:"/research/ui/dashboard/dashboard-improvements",draft:!1,editUrl:"https://github.com/packit/research/tree/main/research/ui/dashboard/dashboard-improvements.md",tags:[],version:"current",frontMatter:{title:"Improvements",authors:"mfocko"},sidebar:"autogenerated",previous:{title:"Dashboard",permalink:"/research/ui/dashboard/"},next:{title:"Authentication with remote platforms",permalink:"/research/ui/dashboard/oauth"}},s={},p=[{value:"Main points",id:"main-points",level:2},{value:"Related issues",id:"related-issues",level:2},{value:"Current state",id:"current-state",level:2},{value:"Removal of the <em>build result</em> webpage",id:"removal-of-the-build-result-webpage",level:2},{value:"Providing more information for dashboard through API",id:"providing-more-information-for-dashboard-through-api",level:2},{value:"Allowing read-only access to database",id:"allowing-read-only-access-to-database",level:3},{value:"Authentication against git-forge",id:"authentication-against-git-forge",level:2},{value:"Possible use-cases",id:"possible-use-cases",level:3},{value:"Additional improvements",id:"additional-improvements",level:2},{value:"Overviews",id:"overviews",level:3},{value:"Notifications",id:"notifications",level:3},{value:"Timeline for changes",id:"timeline-for-changes",level:2}],u={toc:p},d="wrapper";function g(e){let{components:a,...t}=e;return(0,i.yg)(d,(0,r.A)({},u,t,{components:a,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"dashboard-improvements"},"Dashboard Improvements"),(0,i.yg)("h2",{id:"main-points"},"Main points"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Informing users about results of SRPM, Copr and Koji builds or Testing Farm"),(0,i.yg)("li",{parentName:"ul"},'Replace service "Build Result" webpage with dashboard',(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Deprecation of webpage in service"))),(0,i.yg)("li",{parentName:"ul"},"Database connection for dashboard",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Consider sensitivity of information provided (even with read-only access)"),(0,i.yg)("li",{parentName:"ul"},"Consider customizing API to the needs of dashboard"))),(0,i.yg)("li",{parentName:"ul"},"Consider possible improvements related to either of the points")),(0,i.yg)("h2",{id:"related-issues"},"Related issues"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"https://github.com/packit/packit-service/issues/506"},"Have a separate page for Testing farm"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Seems to be at least partially fixed: ",(0,i.yg)("a",{parentName:"li",href:"https://dashboard.stg.packit.dev/results/testing-farm/5603"},"https://dashboard.stg.packit.dev/results/testing-farm/5603")),(0,i.yg)("li",{parentName:"ul"},"I guess we need to interlink all related jobs (SRPM, Copr and TF)"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"https://github.com/packit/packit-service/issues/982"},"IDs for Copr builds in API endpoint (bug)"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Does not affect usage of Copr build result page so far (is not used), or is the\nreason for only one chroot result being displayed?")))),(0,i.yg)("h2",{id:"current-state"},"Current state"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"https://github.com/packit/dashboard/blob/main/TODO.md"},"Already existing TODO list")),(0,i.yg)("li",{parentName:"ul"},"We have empty homepage",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"I can see a potential in showing some statistics, could be helpful to us\nand also to users."),(0,i.yg)("li",{parentName:"ul"},"We could list recently finished jobs or queue."))),(0,i.yg)("li",{parentName:"ul"},"We have implemented result pages",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Copr builds:bug mentioned above"),(0,i.yg)("li",{parentName:"ul"},"Minimal info for testing farm"))),(0,i.yg)("li",{parentName:"ul"},"For Copr builds we link directly Copr logs on the dashboard (recent Copr builds),\nwe should probably address our own result page before the Copr one."),(0,i.yg)("li",{parentName:"ul"},"Navigation:",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"From each of those we can get back to the branch or the PR"),(0,i.yg)("li",{parentName:"ul"},"SRPM results -> {can see logs, download SRPM if available}"),(0,i.yg)("li",{parentName:"ul"},"Copr results -> {SRPM results, Copr logs, compressed build logs from Copr}"),(0,i.yg)("li",{parentName:"ul"},"TF results -> dead end")))),(0,i.yg)("h2",{id:"removal-of-the-build-result-webpage"},"Removal of the ",(0,i.yg)("em",{parentName:"h2"},"build result")," webpage"),(0,i.yg)("ol",{start:0},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Fix Copr build bug mentioned above, so that we can see all chroots.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Set dashboard link for all new commit statuses.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Set 2-week long (conveniently matching sprint) grace period for build result\npage in service."),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("em",{parentName:"p"},"Argument"),": 2 weeks is enough for populating commit statuses with links to dashboard\nand in majority of cases, old links are mainly used for debugging purposes on\nour side.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Remove build result page from service."),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("em",{parentName:"p"},"Alternatively"),": Also redirect all requests from service to dashboard in step 1\nand keep live for longer period of time."))),(0,i.yg)("h2",{id:"providing-more-information-for-dashboard-through-api"},"Providing more information for dashboard through API"),(0,i.yg)("h3",{id:"allowing-read-only-access-to-database"},"Allowing read-only access to database"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Suspects: ",(0,i.yg)("inlineCode",{parentName:"li"},"data")," in Copr, Koji and Testing Farm"),(0,i.yg)("li",{parentName:"ul"},"Otherwise there does not appear to be anything sensitive present"),(0,i.yg)("li",{parentName:"ul"},"Potential downsides would be:",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Providing information through dashboard that cannot be accessed from API"),(0,i.yg)("li",{parentName:"ul"},"Additional logic for the dashboard (in case we want to provide information via\nAPI too)"),(0,i.yg)("li",{parentName:"ul"},"Testing")))),(0,i.yg)("h2",{id:"authentication-against-git-forge"},"Authentication against git-forge"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Could be probably generalized to OAuth in regards to expanding to GitLab"),(0,i.yg)("li",{parentName:"ul"},"OAuth",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"From GitHub we get code (valid for 10 minutes) that can be used to get access\ntoken"),(0,i.yg)("li",{parentName:"ul"},"GitLab appears to work in similar way, there are more options though"),(0,i.yg)("li",{parentName:"ul"},"For our case we should be fine with one-time codes that would be used client-side")))),(0,i.yg)("h3",{id:"possible-use-cases"},"Possible use-cases"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Retriggering"),(0,i.yg)("p",{parentName:"li"},"We could allow retriggering and be sure that user triggering the build again is\nauthorized to do so (spam/DoS protection)"),(0,i.yg)("p",{parentName:"li"},"Cost on our side:\nRequires changes in service codebase and also we would need to make sure that\nretriggering cannot be used outside of the dashboard"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Auth in API ",(0,i.yg)("inlineCode",{parentName:"li"},"dashboard <=> service")),(0,i.yg)("li",{parentName:"ul"},"we could probably restrict IP address of sender to cluster on service side?"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Personalization of homepage view, e.g. all projects I have ",(0,i.yg)("em",{parentName:"p"},"write access")," to or\nall my open PRs (regardless of write access)"))),(0,i.yg)("h2",{id:"additional-improvements"},"Additional improvements"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("em",{parentName:"li"},"Badge")," for README with direct link to project's overview page in dashboard ;)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("em",{parentName:"li"},"Any other suggestions are welcome"),"\n(we could open an issue for this to collect feedback)")),(0,i.yg)("h3",{id:"overviews"},"Overviews"),(0,i.yg)("p",null,"It would be nice to provide overviews:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("em",{parentName:"li"},"Pipeline/Run"),": Currently there is no way to track pipeline/run of Packit on a\nspecific trigger (push, release, PR), it would be nice to have an overview page\non which we could track the whole pipeline from SRPM through Copr to Testing Farm\nand seeing all results (just success/fail) at that one page (with linking to the\npipeline overview from each of the result pages)."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("em",{parentName:"li"},"Project"),": Open PRs with latest status (or release, branch push), recently\nclosed PRs (allowing to switch to results page or the PR/release/branch itself)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("em",{parentName:"li"},"Namespace"),": Similar but with projects, e.g. by recently updated project, showing\nstatus for default branch for example")),(0,i.yg)("h3",{id:"notifications"},"Notifications"),(0,i.yg)("p",null,"We could provide browser notifications for recently finished/failed builds:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"For currently open namespace/repository overview"),(0,i.yg)("li",{parentName:"ul"},"For user's open PRs and all projects with write access, when authenticated"),(0,i.yg)("li",{parentName:"ul"},"For currently open pipeline (SRPM -> Copr -> TF)")),(0,i.yg)("h2",{id:"timeline-for-changes"},"Timeline for changes"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Switch to dashboard and deprecate build-results.")),(0,i.yg)("p",{parentName:"li"},"In the current state dashboard provides definitely more information compared\nto currently used build results page, so in my opinion there are no blockers\nfor a switch."),(0,i.yg)("p",{parentName:"li"},"Regarding the Copr build bug mentioned above: It appears to not show statuses\n(success/failure) for each of the chroots, just the one. And it appears to be\nsame for the service-side page."),(0,i.yg)("p",{parentName:"li"},"Regarding Testing Farm: Currently we link directly to TF page, there is result\npage currently present on dashboard, which might seem to be better option.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Improve the UX for results on dashboard.")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Start with pipeline overview."),(0,i.yg)("p",{parentName:"li"},"With a goal of achieving easy navigability at dashboard after being redirected\nto specific result page from git-forge or even looking up the pipeline itself\nfrom the dashboard.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Homepage with statistics, current queue, recent runs."),(0,i.yg)("p",{parentName:"li"},"That would also make the service look more live at first sight.")))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Overviews for project and namespaces."))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Authentication and implementing related features (retriggering, custom views).")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Any additional improvements (from ",(0,i.yg)("em",{parentName:"p"},"Packit badge")," through notifications to anything else)."))))}g.isMDXComponent=!0}}]);