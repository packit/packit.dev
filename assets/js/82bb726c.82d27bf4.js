"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[9647],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var o=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,i=function(e,t){if(null==e)return{};var a,o,i={},n=Object.keys(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=o.createContext({}),c=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},u=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=c(a),p=i,m=h["".concat(l,".").concat(p)]||h[p]||d[p]||n;return a?o.createElement(m,r(r({ref:t},u),{},{components:a})):o.createElement(m,r({ref:t},u))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,r=new Array(n);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:i,r[1]=s;for(var c=2;c<n;c++)r[c]=a[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,a)}p.displayName="MDXCreateElement"},3941:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var o=a(87462),i=(a(67294),a(3905));const n={title:"Packit\u2019s statement on Source-git for 2023/Q3",date:new Date("2023-06-22T22:59:59.000Z"),sidebar_position:2},r="Packit\u2019s statement on Source-git for 2023/Q3",s={unversionedId:"status",id:"status",title:"Packit\u2019s statement on Source-git for 2023/Q3",description:"The Packit team has worked on the source-git project for a few years (with varying priority) and a lot of research, prototyping and coding has been done. The goal of this document is to provide a status update on the source-git project and set clear expectations for the future.",source:"@site/source-git/status.md",sourceDirName:".",slug:"/status",permalink:"/source-git/status",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/source-git/status.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Packit\u2019s statement on Source-git for 2023/Q3",date:"2023-06-22T22:59:59.000Z",sidebar_position:2},sidebar:"autogenerated",previous:{title:"Design",permalink:"/source-git/design"},next:{title:"Working with source-git",permalink:"/source-git/work-with-source-git/"}},l={},c=[{value:"Current state",id:"current-state",level:2},{value:"CLI interface for local usage",id:"cli-interface-for-local-usage",level:3},{value:"Service integration for CentOS Stream",id:"service-integration-for-centos-stream",level:3},{value:"Workflow",id:"workflow",level:4},{value:"Implementation",id:"implementation",level:4},{value:"What to expect from source-git and Packit team?",id:"what-to-expect-from-source-git-and-packit-team",level:2},{value:"FAQ",id:"faq",level:2},{value:"I really want this feature to be implemented. What can we do?",id:"i-really-want-this-feature-to-be-implemented-what-can-we-do",level:3},{value:"Is the source-git dead?",id:"is-the-source-git-dead",level:3},{value:"Can we do something to move this effort forward?",id:"can-we-do-something-to-move-this-effort-forward",level:3},{value:"Can we do something to help this succeed in the future?",id:"can-we-do-something-to-help-this-succeed-in-the-future",level:3},{value:"Why don\u2019t we remove dist-git completely? Wouldn\u2019t it be easier?",id:"why-dont-we-remove-dist-git-completely-wouldnt-it-be-easier",level:3},{value:"Was the work on this a waste of time?",id:"was-the-work-on-this-a-waste-of-time",level:3},{value:"What could have been done better?",id:"what-could-have-been-done-better",level:3}],u={toc:c},h="wrapper";function d(e){let{components:t,...a}=e;return(0,i.kt)(h,(0,o.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"packits-statement-on-source-git-for-2023q3"},"Packit\u2019s statement on Source-git for 2023/Q3"),(0,i.kt)("p",null,"The Packit team has worked on the source-git project for a few years (with varying priority) and a lot of research, prototyping and coding has been done. The goal of this document is to provide a status update on the source-git project and set clear expectations for the future."),(0,i.kt)("p",null,"Source-git is a workflow to efficiently maintain software downstream using the upstream git history with layering custom content on top as git commits and respective RPM spec file patches."),(0,i.kt)("h2",{id:"current-state"},"Current state"),(0,i.kt)("p",null,"By today (June 22, 2023), there is an existing tooling for source-git manipulation and a service allowing people to contribute to CentOS Stream via the source-git repositories."),(0,i.kt)("h3",{id:"cli-interface-for-local-usage"},"CLI interface for local usage"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"There is a ",(0,i.kt)("inlineCode",{parentName:"li"},"packit source-git")," subcommand providing multiple commands that enable initialising a source-git repository, syncing the content between source-git and dist-git and obtaining the status of the sync."),(0,i.kt)("li",{parentName:"ul"},"The usage is documented here: ",(0,i.kt)("a",{parentName:"li",href:"https://packit.dev/source-git/work-with-source-git/"},"https://packit.dev/source-git/work-with-source-git/")),(0,i.kt)("li",{parentName:"ul"},"Sahana Prasad Hebbur Narasimha Prasad uses the tooling for ",(0,i.kt)("inlineCode",{parentName:"li"},"openssl")," and ",(0,i.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=0j5ZglF0PT8"},"made a talk about that on DevConf.CZ 23"),"."),(0,i.kt)("li",{parentName:"ul"},"This tooling is a part of Packit\u2019s CLI tool (",(0,i.kt)("inlineCode",{parentName:"li"},"packit")," RPM package in Fedora/EPEL8).")),(0,i.kt)("h3",{id:"service-integration-for-centos-stream"},"Service integration for CentOS Stream"),(0,i.kt)("h4",{id:"workflow"},"Workflow"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"People can request a source-git repository to be placed into ",(0,i.kt)("a",{parentName:"li",href:"https://gitlab.com/redhat/centos-stream/src"},"https://gitlab.com/redhat/centos-stream/src")," "),(0,i.kt)("li",{parentName:"ul"},"Contributors can submit contributions on the source level (in the source-git repository)."),(0,i.kt)("li",{parentName:"ul"},"The automation generates a corresponding dist-git merge request and syncs back the CI results."),(0,i.kt)("li",{parentName:"ul"},"Documentation: ",(0,i.kt)("a",{parentName:"li",href:"https://docs.centos.org/en-US/stream-contrib/contributing/source-git/"},"https://docs.centos.org/en-US/stream-contrib/contributing/source-git/"))),(0,i.kt)("h4",{id:"implementation"},"Implementation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A separate instance of Packit service is deployed and maintained.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Most of the code is shared with Packit (such as deployment or architecture)."),(0,i.kt)("li",{parentName:"ul"},"The worker implementation differs and is located in a separate ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/packit/hardly"},"repository"),".")))),(0,i.kt)("h2",{id:"what-to-expect-from-source-git-and-packit-team"},"What to expect from source-git and Packit team?"),(0,i.kt)("p",null,"Packit Team exists to ",(0,i.kt)("em",{parentName:"p"},"automate and ease the work of maintainers and developers both in the communities and those that are foundational to Red Hat\u2019s Open Hybrid Cloud Strategy.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Given the purpose and the fact that there are fewer people in the team, we agreed on not continuing the active development of source-git for now.")),(0,i.kt)("p",null,"Here are the main reasons:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"There are 60-70 packages which have a high number of patches (more than 10) in every distribution.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"It\u2019s a small number of projects that have high expectations of the solution and few of them even already have some source-git solution (and don\u2019t need to migrate unless it provides better experience or functionality). On the other hand, the benefit of having the source-git solution maintained by someone else can be huge for those projects."),(0,i.kt)("li",{parentName:"ul"},"On the other efforts (mentioned below), the audience is much bigger."))),(0,i.kt)("li",{parentName:"ul"},"As we see it now, source-git as a whole is a huge effort trying to solve a lot of problems. Instead, we can split it into smaller tasks and resolve them one by one. (And the full source-git might be a result of it, or not.)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"A lot is already happening on behalf of the Packit project, e.g. upstream builds/tests, releasing to CentOS Stream."),(0,i.kt)("li",{parentName:"ul"},"Also, source-git is a huge project and it\u2019s hard to make it real as a whole. (Ideally, this needs to be done for both Fedora and RHEL/Stream which is not an easy task \u2013 politically and technically.)"))),(0,i.kt)("li",{parentName:"ul"},"We can spend our time on other efforts to support both internal and external customers/users more effectively. Here are the alternatives being considered:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Integration of Packit with HMS (which is currently the company\u2019s priority). We are planning a ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/packit/research/issues/175"},(0,i.kt)("em",{parentName:"a"},"Developer build experience")),"."),(0,i.kt)("li",{parentName:"ul"},"Being part of RHEL on GitLab initiative (being discussed)."),(0,i.kt)("li",{parentName:"ul"},"Providing tooling for CentOS Stream. (Currently being done in collaboration with Gris Ge, but the team can put more effort here.)"),(0,i.kt)("li",{parentName:"ul"},"Enhancing the current Packit workflows. Supporting internal/external teams in upstream projects (saving time by helping the shift left movement) by improving the current integration with Copr, internal/public Testing Farm, maintenance automation, VM image builds. (We can save more time/money. More accurate data is being collected.)"))),(0,i.kt)("li",{parentName:"ul"},"What can people expect from now on?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"CLI supporting the basic source-git manipulation is provided as part of the ",(0,i.kt)("inlineCode",{parentName:"li"},"packit")," Fedora/EPEL8 package that can be installed in a local environment or a container.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Initialising a source-git repository, syncing the content between source-git and dist-git and obtaining the status of the sync are the supported use cases."))),(0,i.kt)("li",{parentName:"ul"},"Integration for gitlab.com/redhat/centos-stream/src is being deployed.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"This integration takes care of opening a new dist-git merge request for any source-git merge request and synchronising the CI statuses back."))),(0,i.kt)("li",{parentName:"ul"},"Critical fixes are being resolved to maintain the current feature set."),(0,i.kt)("li",{parentName:"ul"},"The team will not implement any new functionality, but we encourage or can help others to do it."),(0,i.kt)("li",{parentName:"ul"},"The team will check the demand and the priority of this feature on a quarterly basis to update the priority of this effort.")))),(0,i.kt)("h2",{id:"faq"},"FAQ"),(0,i.kt)("h3",{id:"i-really-want-this-feature-to-be-implemented-what-can-we-do"},"I really want this feature to be implemented. What can we do?"),(0,i.kt)("p",null,"You can definitely reach out to the team and we can discuss what needs to be done. We can either help you implement this, or (in case of higher demand) Packit team will implement this for you. The Packit team will not pick any new work without strong justification."),(0,i.kt)("h3",{id:"is-the-source-git-dead"},"Is the source-git dead?"),(0,i.kt)("p",null,"No. This is just about deprioritising this effort. Packit team regularly checks the priorities and if the demand for this increases, the team will prioritise this again."),(0,i.kt)("h3",{id:"can-we-do-something-to-move-this-effort-forward"},"Can we do something to move this effort forward?"),(0,i.kt)("p",null,"Yes, either bring multiple other teams and reach out to us, or we are willing to pass this to a new team to continue the work."),(0,i.kt)("h3",{id:"can-we-do-something-to-help-this-succeed-in-the-future"},"Can we do something to help this succeed in the future?"),(0,i.kt)("p",null,"Yes, simplify the distribution workflow itself and reduce differences between Fedora and RHEL/Stream. Ask the Red Hat \u201cOperating System CI\u201d (OSCI) team and/or ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/veruu"},"Veronika Kabatova")," about how you can help."),(0,i.kt)("h3",{id:"why-dont-we-remove-dist-git-completely-wouldnt-it-be-easier"},"Why don\u2019t we remove dist-git completely? Wouldn\u2019t it be easier?"),(0,i.kt)("p",null,"It would be really nice, but it\u2019s a bold move that needs to be planned and done properly to be accepted. We, as a Packit team, don\u2019t have enough people and power to do this. This shouldn\u2019t be a decision of the Packit team, but we can be asked to do the implementation once it\u2019s agreed on. (Because of this, we went with an opt-in approach instead. Note the ratio of packages potentially interested in source-git.)"),(0,i.kt)("h3",{id:"was-the-work-on-this-a-waste-of-time"},"Was the work on this a waste of time?"),(0,i.kt)("p",null,"We still think that the dist-git approach needs to be improved to make the distribution work more efficient. We\u2019ve learned a lot and collected some valuable data/feedback that can be reused. The developed solution still provides some value and can be built upon. The source-git work was done as part of the Packit project which is successful as a whole. Having it as an extra deployment made us do the project more modular.\nAlso, to move forward as a team/company, we need to try new things, but we need to realise when to stop or slow down."),(0,i.kt)("h3",{id:"what-could-have-been-done-better"},"What could have been done better?"),(0,i.kt)("p",null,"Changing the core part of a development workflow, source code handling, is a huge task. We intended to do this in all three distributions: RHEL, Fedora Linux and CentOS Stream. That is a humongous scope, especially when the infrastructure behind these distros is changing. Having more reasonable expectations and smaller work items could result in more use of our source-git workflow. Now that gitlab.com is becoming the centerpiece for all sources, it will be more manageable to implement complex workflow changes."))}d.isMDXComponent=!0}}]);