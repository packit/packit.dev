"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[67188],{15680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>g});var r=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,g=m["".concat(l,".").concat(d)]||m[d]||u[d]||i;return n?r.createElement(g,o(o({ref:t},c),{},{components:n})):r.createElement(g,o({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},90286:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=n(58168),a=(n(96540),n(15680));const i={title:"test",date:new Date("2025-09-15T00:00:00.000Z"),sidebar_position:8},o="packit test",s={unversionedId:"cli/test",id:"cli/test",title:"test",description:"Run tmt tests locally using content from the upstream repository, mimicking the behavior of the tmt functionality.",source:"@site/docs/cli/test.md",sourceDirName:"cli",slug:"/cli/test",permalink:"/docs/cli/test",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/cli/test.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"test",date:"2025-09-15T00:00:00.000Z",sidebar_position:8},sidebar:"autogenerated",previous:{title:"srpm",permalink:"/docs/cli/srpm"},next:{title:"sync-from-downstream",permalink:"/docs/cli/sync-from-downstream"}},l={},p=[{value:"Requirements",id:"requirements",level:2},{value:"Tutorial",id:"tutorial",level:2},{value:"Help",id:"help",level:2}],c={toc:p},m="wrapper";function u(e){let{components:t,...n}=e;return(0,a.yg)(m,(0,r.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"packit-test"},(0,a.yg)("inlineCode",{parentName:"h1"},"packit test")),(0,a.yg)("p",null,"Run tmt tests locally using content from the upstream repository, mimicking the behavior of the tmt functionality."),(0,a.yg)("p",null,"By default, if no RPM paths are passed, packit builds RPMs from the current repository's source code using ",(0,a.yg)("inlineCode",{parentName:"p"},"mock"),", then runs tmt tests in a container environment. This enables local debugging and iteration without requiring commits or CI pipeline triggers."),(0,a.yg)("p",null,"You can override test behavior and build configuration directly from the command line using various options like ",(0,a.yg)("inlineCode",{parentName:"p"},"--target"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"--plan"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"--rpm-paths"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"--clean-before"),"/",(0,a.yg)("inlineCode",{parentName:"p"},"--no-clean-before"),"."),(0,a.yg)("p",null,"The command supports two main workflows:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Auto-build workflow: Build RPMs from source code and run tmt tests on the built RPM. This is triggered when there's no ",(0,a.yg)("inlineCode",{parentName:"li"},"--rpm-paths")," passed via the CLI."),(0,a.yg)("li",{parentName:"ul"},"Pre-built RPM workflow: Test existing RPM files, Paths to the RPMs are passed with the ",(0,a.yg)("inlineCode",{parentName:"li"},"--rpm-paths")," option.")),(0,a.yg)("h2",{id:"requirements"},"Requirements"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Upstream project is using git."),(0,a.yg)("li",{parentName:"ul"},"Packit config file placed in the upstream repository."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"tmt")," (Test Management Tool) available in the system."),(0,a.yg)("li",{parentName:"ul"},"Mock build system configured (for auto-build workflow).")),(0,a.yg)("h2",{id:"tutorial"},"Tutorial"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Place a config file for packit in the root of your upstream repository.")),(0,a.yg)("ol",{start:2},(0,a.yg)("li",{parentName:"ol"},"Basic local testing (auto-build workflow):",(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre"},"$ packit test\nBuilding SRPM...\nRunning mock build for target fedora-rawhide-x86_64...\nGenerated RPMs: my-package-1.0-1.fc40.x86_64.rpm\nRunning tmt tests...\nsummary: 3 tests executed, 3 passed\n")))),(0,a.yg)("ol",{start:3},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Auto build workflow with Test on specific target:"),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre"},"$ packit test --target fedora:39\nBuilding SRPM...\nRunning mock build for target fedora-39-x86_64...\nGenerated RPMs: my-package-1.0-1.fc39.x86_64.rpm\nRunning tmt tests on fedora:39...\nsummary: 3 tests executed, 3 passed\n"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Test pre-built RPMs:"),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre"},"$ packit test --rpm-paths ./my-package-1.0-1.rpm\nRunning tmt tests with provided RPMs...\nsummary: 3 tests executed, 3 passed\n"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Test specific plans only:"),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre"},"$ packit test --plan smoke-tests\nBuilding SRPM...\nRunning mock build for target fedora-rawhide-x86_64...\nGenerated RPMs: my-package-1.0-1.fc40.x86_64.rpm\nRunning tmt plans: smoke-tests, integration...\nsummary: 5 tests executed, 5 passed\n"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Skip cleanup of tmt artifacts for faster iteration:"),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre"},"$ packit test --no-clean-before --target centos:stream9\nSkipping tmt cleanup...\nBuilding SRPM...\nRunning mock build for target centos-stream-9-x86_64...\nGenerated RPMs: my-package-1.0-1.el9.x86_64.rpm\nRunning tmt tests on centos:stream9...\nsummary: 3 tests executed, 3 passed\n")),(0,a.yg)("p",{parentName:"li"},"NB: This may cause some side effects like disk space exhaustion."))),(0,a.yg)("h2",{id:"help"},"Help"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"Usage: packit test [OPTIONS] [PATH_OR_URL]\n\n  Run tmt tests locally using content from the upstream repository.\n\n  This command builds RPMs from the current repository state and runs tests in\n  containerized environments, mimicking Packit's testing service behavior for\n  local debugging and development.\n\nOptions:\n  -p, --package TEXT              Package to source build, if more than one\n                                  available, like in a monorepo configuration.\n                                  Use it multiple times to select multiple\n                                  packages.Defaults to all the packages listed\n                                  inside the config.\n  --rpm_paths TEXT                Path to RPM file(s) to test. Can be used\n                                  multiple times.If not provided, RPMs will be\n                                  built automatically from source.\n  --target TEXT                   Container image for the testing environment,\n                                  e.g., `fedora:39`, `centos:stream9`.\n  --plan TEXT                     List of specific tmt plans to run. Can be\n                                  used multiple times. If not specified, all\n                                  plans are executed.\n  --clean-before / --no-clean-before\n                                  Run 'tmt clean --all' before starting the\n                                  test (default: disabled).\n  -h, --help                      Show this message and exit.\n")))}u.isMDXComponent=!0}}]);