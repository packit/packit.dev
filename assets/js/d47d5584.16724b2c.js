"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[84144],{15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>m});var i=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=i.createContext({}),p=function(e){var t=i.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},g=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),d=p(a),c=n,m=d["".concat(l,".").concat(c)]||d[c]||u[c]||r;return a?i.createElement(m,o(o({ref:t},g),{},{components:a})):i.createElement(m,o({ref:t},g))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:n,o[1]=s;for(var p=2;p<r;p++)o[p]=a[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}c.displayName="MDXCreateElement"},93619:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var i=a(58168),n=(a(96540),a(15680));const r={title:"Bodhi updates",sidebar_position:3},o="job: bodhi_update",s={unversionedId:"configuration/downstream/bodhi_update",id:"configuration/downstream/bodhi_update",title:"Bodhi updates",description:"Bodhi updates",source:"@site/docs/configuration/downstream/bodhi_update.md",sourceDirName:"configuration/downstream",slug:"/configuration/downstream/bodhi_update",permalink:"/docs/configuration/downstream/bodhi_update",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/configuration/downstream/bodhi_update.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Bodhi updates",sidebar_position:3},sidebar:"autogenerated",previous:{title:"Koji builds",permalink:"/docs/configuration/downstream/koji_build"},next:{title:"Downstream configuration template",permalink:"/docs/configuration/downstream_configuration_template"}},l={},p=[{value:"Supported triggers",id:"supported-triggers",level:2},{value:"Required parameters",id:"required-parameters",level:2},{value:"Optional parameters",id:"optional-parameters",level:2},{value:"Retriggering",id:"retriggering",level:2},{value:"Example",id:"example",level:2}],g={toc:p},d="wrapper";function u(e){let{components:t,...r}=e;return(0,n.yg)(d,(0,i.A)({},g,r,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"job-bodhi_update"},(0,n.yg)("inlineCode",{parentName:"h1"},"job: bodhi_update")),(0,n.yg)("p",null,(0,n.yg)("img",{alt:"Bodhi updates",src:a(98006).A,width:"1460",height:"543"})),(0,n.yg)("p",null,"Create a new update in\n",(0,n.yg)("a",{parentName:"p",href:"https://bodhi.fedoraproject.org"},"Fedora Bodhi")," for successful\nKoji build.\nA Packit config file needs to be in the dist-git repository\nto allow this job to be triggered.\nPackit loads the config from the default dist-git branch (usually ",(0,n.yg)("inlineCode",{parentName:"p"},"rawhide"),"). Packit configs on other branches are ignored."),(0,n.yg)("p",null,"Packit provides an overview of its own updates ",(0,n.yg)("a",{parentName:"p",href:"https://dashboard.packit.dev/jobs/bodhi-updates"},"here"),"."),(0,n.yg)("p",null,"You can also utilise\n",(0,n.yg)("a",{parentName:"p",href:"https://apps.fedoraproject.org/notifications/about"},"Fedora Notifications"),"\nto tweak the notifications settings."),(0,n.yg)("admonition",{title:"Downstream configuration template",type:"tip"},(0,n.yg)("p",{parentName:"admonition"},"You can use our ",(0,n.yg)("a",{parentName:"p",href:"/docs/configuration/downstream_configuration_template"},"downstream configuration template"),"\nfor creating your Packit configuration in dist-git repository.")),(0,n.yg)("admonition",{title:"Automate the setup",type:"tip"},(0,n.yg)("p",{parentName:"admonition"},"You can also use ",(0,n.yg)("a",{parentName:"p",href:"/docs/cli/dist-git/init"},"packit dist-git init")," CLI command to create your\nPackit dist-git configuration.")),(0,n.yg)("h2",{id:"supported-triggers"},"Supported triggers"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"commit")," - Packit uses the original action as a config trigger, so you need to use ",(0,n.yg)("inlineCode",{parentName:"li"},"commit")," as a trigger.\nThe real trigger is a successful Koji build (that was triggered from a commit)."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"koji_build")," - reacts to tagging of a Koji build into the configured sidetag group\nMore info about releasing multiple packages together using sidetags can be found\n",(0,n.yg)("a",{parentName:"li",href:"/docs/fedora-releases-guide/releasing-multiple-packages"},"here"),".")),(0,n.yg)("h2",{id:"required-parameters"},"Required parameters"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"dist_git_branches")," - the name of the dist-git branch(es) the build we want to use is coming from.\nYou can also use the ",(0,n.yg)("a",{parentName:"li",href:"/docs/configuration#aliases"},"aliases provided by Packit"),"\nto not need to change the config file when the new system version is released.")),(0,n.yg)("h2",{id:"optional-parameters"},"Optional parameters"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"allowed_builders")," - a list of accounts whose successful Koji builds will trigger Bodhi updates\n(defaults to ",(0,n.yg)("inlineCode",{parentName:"li"},"['packit']"),"). As each item of the list you can specify:",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"name of a FAS account, e.g. ",(0,n.yg)("inlineCode",{parentName:"li"},"my-fas")),(0,n.yg)("li",{parentName:"ul"},"name of a group - starting with ",(0,n.yg)("inlineCode",{parentName:"li"},"@"),", e.g. ",(0,n.yg)("inlineCode",{parentName:"li"},"@my-sig"),"\n(don't forget to put the group name in quotes - a token in YAML is not allowed to start with ",(0,n.yg)("inlineCode",{parentName:"li"},"@"),")"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"all_admins")," alias - allowing all users with admin access to the dist-git repo"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"all_committers")," alias - allowing all users with commit access to the dist-git repo"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"sidetag_group")," - name of a sidetag group this Bodhi update should be created from.\nThe name has to be unique across all projects that use Packit, so don't hesitate to be descriptive.\nA good convention is to use ",(0,n.yg)("inlineCode",{parentName:"li"},"${package1}-${package2}...${packageN}-updates"),"."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"dependencies")," - list of downstream package names that are required to be tagged\ninto the configured sidetag group for this job to be triggered. For example, if you want to include\na ",(0,n.yg)("inlineCode",{parentName:"li"},"koji_build")," job with the same sidetag group configured in package ",(0,n.yg)("inlineCode",{parentName:"li"},"foo")," in this update,\nyou need to list ",(0,n.yg)("inlineCode",{parentName:"li"},"foo")," here.")),(0,n.yg)("h2",{id:"retriggering"},"Retriggering"),(0,n.yg)("p",null,"For retriggering the job, see ",(0,n.yg)("a",{parentName:"p",href:"/docs/retriggering#bodhi_update"},"retriggering docs"),"."),(0,n.yg)("h2",{id:"example"},"Example"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-yaml"},"issue_repository: https://github.com/my-username/packit-notifications\n\njobs:\n- job: bodhi_update\n  trigger: commit\n  dist_git_branches:\n    - fedora-branched # rawhide updates are created automatically\n    - epel-8\n")))}u.isMDXComponent=!0},98006:(e,t,a)=>{a.d(t,{A:()=>i});const i=a.p+"assets/images/bodhi-updates-a980a609b5ce72c5d78ef543a43d5b00.png"}}]);