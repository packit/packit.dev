"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[3908],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>f});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var d=n.createContext({}),u=function(e){var t=n.useContext(d),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(d.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,d=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),c=u(r),m=o,f=c["".concat(d,".").concat(m)]||c[m]||p[m]||i;return r?n.createElement(f,a(a({ref:t},l),{},{components:r})):n.createElement(f,a({ref:t},l))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=m;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s[c]="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=r[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},49262:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var n=r(87462),o=(r(67294),r(3905));const i={title:"Bodhi updates",sidebar_position:3},a="job: bodhi_update",s={unversionedId:"configuration/downstream/bodhi_update",id:"configuration/downstream/bodhi_update",title:"Bodhi updates",description:"Create a new update in",source:"@site/docs/configuration/downstream/bodhi_update.md",sourceDirName:"configuration/downstream",slug:"/configuration/downstream/bodhi_update",permalink:"/docs/configuration/downstream/bodhi_update",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/configuration/downstream/bodhi_update.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Bodhi updates",sidebar_position:3},sidebar:"autogenerated",previous:{title:"Koji builds",permalink:"/docs/configuration/downstream/koji_build"},next:{title:"Actions",permalink:"/docs/configuration/actions"}},d={},u=[{value:"Supported triggers",id:"supported-triggers",level:2},{value:"Required parameters",id:"required-parameters",level:2},{value:"Example",id:"example",level:2}],l={toc:u},c="wrapper";function p(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"job-bodhi_update"},(0,o.kt)("inlineCode",{parentName:"h1"},"job: bodhi_update")),(0,o.kt)("p",null,"Create a new update in\n",(0,o.kt)("a",{parentName:"p",href:"https://bodhi.fedoraproject.org"},"Fedora Bodhi")," for successful\nKoji build.\nA Packit config file needs to be in the dist-git repository\nto allow this job to be triggered.\nPackit loads the config from the commit the build is triggered from\n(therefore, the Packit configuration needs to be in each branch\nPackit should act upon)."),(0,o.kt)("p",null,"For now, the Bodhi update is created only for builds submitted by the Packit FAS user.\n(See ",(0,o.kt)("a",{parentName:"p",href:"/docs/configuration/downstream/koji_build"},(0,o.kt)("inlineCode",{parentName:"a"},"koji_build"))," job for more details on how to set this up.)\nThis is just for the early stage of this job, and\nwe can easily turn off that filter.\nLet us know if you need this condition to be removed."),(0,o.kt)("p",null,"There is no UI provided by Packit for the job,\nbut it is visible across Fedora systems\nlike a manually created Bodhi update, and you can utilise\n",(0,o.kt)("a",{parentName:"p",href:"https://apps.fedoraproject.org/notifications/about"},"Fedora Notifications"),"\nto tweak the notifications settings."),(0,o.kt)("p",null,"For retriggering the job, see ",(0,o.kt)("a",{parentName:"p",href:"/docs/fedora-releases-guide"},"our release guide"),"."),(0,o.kt)("p",null,"Note that this job is really new and not mature yet \u2014 let us know if you find anything problematic\nor any improvement we can implement."),(0,o.kt)("h2",{id:"supported-triggers"},"Supported triggers"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"commit")," - Packit uses the original action as a config trigger, so you need to use ",(0,o.kt)("inlineCode",{parentName:"li"},"commit")," as a trigger.\nThe real trigger is a successful Koji build (that was triggered from a commit).")),(0,o.kt)("h2",{id:"required-parameters"},"Required parameters"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"dist_git_branches")," - the name of the dist-git branch(es) the build we want to use is coming from.\nYou can also use the ",(0,o.kt)("a",{parentName:"li",href:"/docs/configuration#aliases"},"aliases provided by Packit"),"\nto not need to change the config file when the new system version is released.")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"jobs:\n- job: bodhi_update\n  trigger: commit\n  dist_git_branches:\n    - fedora-branched # rawhide updates are created automatically\n    - epel-8\n")))}p.isMDXComponent=!0}}]);