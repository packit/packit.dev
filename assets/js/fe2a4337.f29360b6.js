"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[3242],{8533:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var i=a(58168),n=(a(96540),a(15680));const r={title:"What to know before onboarding",sidebar_position:8},o="What maintainers should know before adopting Packit for downstream release automation",s={unversionedId:"fedora-releases-guide/what-to-know",id:"fedora-releases-guide/what-to-know",title:"What to know before onboarding",description:"Responsibilities",source:"@site/docs/fedora-releases-guide/what-to-know.md",sourceDirName:"fedora-releases-guide",slug:"/fedora-releases-guide/what-to-know",permalink:"/docs/fedora-releases-guide/what-to-know",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/fedora-releases-guide/what-to-know.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"What to know before onboarding",sidebar_position:8},sidebar:"autogenerated",previous:{title:"Configuring Fedora Notifications",permalink:"/docs/fedora-releases-guide/fedora-notifications"},next:{title:"Configuration",permalink:"/docs/configuration/"}},l={},p=[{value:"Responsibilities",id:"responsibilities",level:2},{value:"Monitoring and observability",id:"monitoring-and-observability",level:2},{value:"Recovery procedures",id:"recovery-procedures",level:2},{value:"Service-based retriggering",id:"service-based-retriggering",level:3},{value:"Manual CLI Operations",id:"manual-cli-operations",level:3},{value:"Troubleshooting Issues",id:"troubleshooting-issues",level:4},{value:"Customization options",id:"customization-options",level:2},{value:"Changelogs",id:"changelogs",level:3},{value:"Sidetags - releasing multiple packages in a single update",id:"sidetags---releasing-multiple-packages-in-a-single-update",level:3},{value:"Ecosystem Awareness",id:"ecosystem-awareness",level:2}],d={toc:p},u="wrapper";function g(e){let{components:t,...a}=e;return(0,n.yg)(u,(0,i.A)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"what-maintainers-should-know-before-adopting-packit-for-downstream-release-automation"},"What maintainers should know before adopting Packit for downstream release automation"),(0,n.yg)("h2",{id:"responsibilities"},"Responsibilities"),(0,n.yg)("p",null,"Packit is designed to ",(0,n.yg)("strong",{parentName:"p"},"assist")," maintainers, not to ",(0,n.yg)("strong",{parentName:"p"},"replace")," them."),(0,n.yg)("p",null,"Maintainers retain key responsibilities:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"reviewing and merging Packit-created pull requests"),(0,n.yg)("li",{parentName:"ul"},"maintaining package quality"),(0,n.yg)("li",{parentName:"ul"},"ensuring updates don't break dependant packages")),(0,n.yg)("admonition",{type:"tip"},(0,n.yg)("mdxAdmonitionTitle",{parentName:"admonition"},(0,n.yg)("inlineCode",{parentName:"mdxAdmonitionTitle"},"version_update_mask")),(0,n.yg)("p",{parentName:"admonition"},"The default Packit onboarding configuration enables automated releases only for ",(0,n.yg)("inlineCode",{parentName:"p"},"rawhide"),"."),(0,n.yg)("p",{parentName:"admonition"},"You can custimize it further either manually or by using the ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/cli/dist-git/init"},(0,n.yg)("inlineCode",{parentName:"a"},"packit dist-git init"))," command. "),(0,n.yg)("p",{parentName:"admonition"},"When extending the automation to branched Fedoras and EPELs, consider using ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/configuration#version_update_mask"},(0,n.yg)("inlineCode",{parentName:"a"},"version_update_mask")),", to prevent introducing breaking changes into stable distributions.")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"keeping noise low for co-maintainers")),(0,n.yg)("admonition",{type:"tip"},(0,n.yg)("mdxAdmonitionTitle",{parentName:"admonition"},(0,n.yg)("inlineCode",{parentName:"mdxAdmonitionTitle"},"upstream_tag_include")," and ",(0,n.yg)("inlineCode",{parentName:"mdxAdmonitionTitle"},"upstream_tag_exclude")),(0,n.yg)("p",{parentName:"admonition"},"If you are not interested in releasing specific versions, you can prevent Packit from creating PRs for them by using ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/configuration#upstream_tag_include"},(0,n.yg)("inlineCode",{parentName:"a"},"upstream_tag_include"))," or ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/configuration#upstream_tag_exclude"},(0,n.yg)("inlineCode",{parentName:"a"},"upstream_tag_exclude"))," configuration options. This helps reduce unnecessary notifications for your co-maintainers.")),(0,n.yg)("h2",{id:"monitoring-and-observability"},"Monitoring and observability"),(0,n.yg)("p",null,"Track ",(0,n.yg)("em",{parentName:"p"},"Packit Service")," activity through:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"the pull request updates, and "),(0,n.yg)("li",{parentName:"ul"},"the ",(0,n.yg)("a",{parentName:"li",href:"https://dashboard.packit.dev/"},"Packit Dashboard")," (see more ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/fedora-releases-guide/dist-git-onboarding#ui"},"here"),")."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/fedora-releases-guide/dist-git-onboarding#notifications-about-errors"},"notifications about errors"))),(0,n.yg)("p",null,"Packit Service responds to every valid ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/packit/packit.dev/pull/1004#discussion_r1971305820"},"command")," in pull requests. Missing response indicates:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Incorrect command syntax"),(0,n.yg)("li",{parentName:"ul"},"Packit Service outage")),(0,n.yg)("p",null,"Check service status at ",(0,n.yg)("a",{parentName:"p",href:"https://status.packit.dev/"},"our status page"),"."),(0,n.yg)("admonition",{title:"Missing notifications",type:"warning"},(0,n.yg)("p",{parentName:"admonition"},"Pull requests, Koji builds and Bodhi updates are created by Packit FAS account, making it the default notification recipient."),(0,n.yg)("p",{parentName:"admonition"},"To stay informed about Packit-triggered activities in the Fedora ecosystem, ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/fedora-releases-guide/fedora-notifications"},"configure notification settings accordingly"),"."),(0,n.yg)("p",{parentName:"admonition"},"There is an ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/packit/packit-service/issues/2404"},"open issue")," for Bodhi update notifications.")),(0,n.yg)("h2",{id:"recovery-procedures"},"Recovery procedures"),(0,n.yg)("h3",{id:"service-based-retriggering"},"Service-based retriggering"),(0,n.yg)("p",null,"Each job configured in ",(0,n.yg)("inlineCode",{parentName:"p"},"packit.yml")," can be retriggered via dist-git pull request comments. See the ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/retriggering"},"complete list of commands"),"."),(0,n.yg)("h3",{id:"manual-cli-operations"},"Manual CLI Operations"),(0,n.yg)("p",null,"During service outages, maintain workflow using Packit CLI:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Install ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/cli"},"Packit CLI")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/configuration#user-configuration-file"},"Configure required tokens")),(0,n.yg)("li",{parentName:"ol"},"Verify setup (if not already working in service):",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Follow ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/fedora-releases-guide/dist-git-onboarding"},"dist-git onboarding guide")),(0,n.yg)("li",{parentName:"ul"},"Validate config with ",(0,n.yg)("inlineCode",{parentName:"li"},"packit config validate"))))),(0,n.yg)("h4",{id:"troubleshooting-issues"},"Troubleshooting Issues"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Missing pull request for release:")),(0,n.yg)("p",null,"Use ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/cli/pull-from-upstream"},(0,n.yg)("inlineCode",{parentName:"a"},"packit pull-from-upstream"))," when ",(0,n.yg)("a",{parentName:"p",href:"https://release-monitoring.org/"},"release-monitoring")," detects updates but pull requests aren't created."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Missing Koji build:")),(0,n.yg)("p",null,"The release pull request is merged (and contains a change in the version value) but a Koji build isn't triggered."),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Check ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/configuration/downstream/koji_build#optional-parameters"},(0,n.yg)("inlineCode",{parentName:"a"},"allowed_pr_authors"))),(0,n.yg)("li",{parentName:"ul"},"Trigger build manually with ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/cli/build/in-koji"},(0,n.yg)("inlineCode",{parentName:"a"},"packit build in-koji"))," (and specify dist-git branches if needed)")),(0,n.yg)("p",null,"When using Packit CLI to create pull requests, ensure your FAS account is added to the ",(0,n.yg)("inlineCode",{parentName:"p"},"allowed_pr_authors")," list to trigger Koji builds automatically. This enables the expected build workflow for maintainer-created pull requests."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Missing Bodhi update:")),(0,n.yg)("p",null,"The Koji build is created but there is no Bodhi update."),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Packit does not create Bodhi updates for ",(0,n.yg)("inlineCode",{parentName:"li"},"rawhide"),", they are automatically created by Bodhi."),(0,n.yg)("li",{parentName:"ul"},"Verify ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/configuration/downstream/bodhi_update#optional-parameters"},(0,n.yg)("inlineCode",{parentName:"a"},"allowed_builders"))),(0,n.yg)("li",{parentName:"ul"},"Create manually using ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/cli/create-update"},(0,n.yg)("inlineCode",{parentName:"a"},"packit create-update")))),(0,n.yg)("p",null,"For updates on non-rawhide branches, verify your FAS account is included in the ",(0,n.yg)("inlineCode",{parentName:"p"},"allowed_builders")," list. When submitting Koji builds via Packit CLI, automatic Bodhi update creation requires your FAS account to be explicitly authorized in this configuration."),(0,n.yg)("h2",{id:"customization-options"},"Customization options"),(0,n.yg)("p",null,"Packit should work out of the box with the simple package structures (e.g. non-complex spec files), but can be customised for more complicated use cases as well."),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/configuration/actions"},"Actions/hooks")),(0,n.yg)("li",{parentName:"ul"},"Reference ",(0,n.yg)("a",{parentName:"li",href:"https://packit.dev/docs/configuration/examples#examples-for-actions"},"configuration examples"))),(0,n.yg)("h3",{id:"changelogs"},"Changelogs"),(0,n.yg)("p",null,"Customize changelog generation following ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/configuration/examples#custom-changelog-generation"},"these examples")),(0,n.yg)("h3",{id:"sidetags---releasing-multiple-packages-in-a-single-update"},"Sidetags - releasing multiple packages in a single update"),(0,n.yg)("p",null,"Follow ",(0,n.yg)("a",{parentName:"p",href:"https://packit.dev/docs/fedora-releases-guide/releasing-multiple-packages"},"this guide")," to enable builds in sidetags."),(0,n.yg)("h2",{id:"ecosystem-awareness"},"Ecosystem Awareness"),(0,n.yg)("p",null,"Before adoption, review similar packages in the same ecosystem for best practices and configuration patterns.\nFind real life examples using ",(0,n.yg)("em",{parentName:"p"},"sourcegraph.com"),": follow ",(0,n.yg)("a",{parentName:"p",href:"https://sourcegraph.com/search?q=context:global+file:%5Epackit%5C.yaml%24+&patternType=keyword&sm=0"},"this example query"),"."))}g.isMDXComponent=!0},15680:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>m});var i=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=i.createContext({}),p=function(e){var t=i.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(a),c=n,m=u["".concat(l,".").concat(c)]||u[c]||g[c]||r;return a?i.createElement(m,o(o({ref:t},d),{},{components:a})):i.createElement(m,o({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:n,o[1]=s;for(var p=2;p<r;p++)o[p]=a[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}c.displayName="MDXCreateElement"}}]);