<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-research docs-doc-id-integrations/downstream/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Automation of the downstream part of the workflow | Packit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://packit.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://packit.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://packit.dev/research/integrations/downstream"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-research-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-research-current"><meta data-rh="true" property="og:title" content="Automation of the downstream part of the workflow | Packit"><meta data-rh="true" name="description" content="In this document, I would like to take a look at the downstream part of the Fedora workflow and how we can automate it, namely:"><meta data-rh="true" property="og:description" content="In this document, I would like to take a look at the downstream part of the Fedora workflow and how we can automate it, namely:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://packit.dev/research/integrations/downstream"><link data-rh="true" rel="alternate" href="https://packit.dev/research/integrations/downstream" hreflang="en"><link data-rh="true" rel="alternate" href="https://packit.dev/research/integrations/downstream" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://STHKG8EYKZ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Packit" href="/opensearch.xml">





<link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="Packit Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="Packit Blog Atom Feed">
<link rel="alternate" type="application/json" href="/posts/feed.json" title="Packit Blog JSON Feed">
<link rel="alternate" type="application/rss+xml" href="/posts/weekly/rss.xml" title="Packit Weekly RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/weekly/atom.xml" title="Packit Weekly Atom Feed">
<link rel="alternate" type="application/json" href="/posts/weekly/feed.json" title="Packit Weekly JSON Feed"><link rel="stylesheet" href="/assets/css/styles.3595ad89.css">
<link rel="preload" href="/assets/js/runtime~main.cb858bf0.js" as="script">
<link rel="preload" href="/assets/js/main.83fc030a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Packit Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Packit Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Packit</b></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/source-git">Source-git</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/development">Development</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/deployment">Deployment</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/research">Research</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/posts">Blog Posts</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/posts/weekly">Weekly Updates</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://dashboard.packit.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://status.packit.dev/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/packit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research">Research notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/job_referencing">Job referencing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/making-decisions">Making decisions in our projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/automation-tools">Tools/libraries similar or related to the Packit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools/libraries similar or related to the Packit&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/celery">Celery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Celery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/database">Database</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/deployment">Deployment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/deprecation">Deprecation policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/git-notes">Git Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/research/category/integrations">Integrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/research/integrations/building-srpm-in-copr">Building SRPMs in Copr</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building SRPMs in Copr&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/integrations/console">console.redhat.com provisioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/research/integrations/downstream">Automation of the downstream part of the workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/integrations/gitlab">GitLab integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/integrations/image-builder">Image Builder</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/automation-of-internal-processes">Automation of internal processes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Automation of internal processes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/monitoring">Monitoring &amp; Metrics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring &amp; Metrics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/monorepo-support">Monorepos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monorepos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/outages">How to manage outages</a><button aria-label="Toggle the collapsible sidebar category &#x27;How to manage outages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/source-git">Source-Git</a><button aria-label="Toggle the collapsible sidebar category &#x27;Source-Git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/specfiles">Specfiles</a><button aria-label="Toggle the collapsible sidebar category &#x27;Specfiles&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/testing">Testing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/user-interface">User Interface</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Interface&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/user-stories">User Stories</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Stories&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/user-experience">User Experience</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Experience&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/workflow-engines">Workflow engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workflow engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/research/category/integrations"><span itemprop="name">Integrations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Automation of the downstream part of the workflow</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Automation of the downstream part of the workflow</h1></header><p>In this document, I would like to take a look at the downstream part of the Fedora workflow and how we can automate it, namely:</p><ul><li>from upstream to dist-git (already implemented, improvements are being worked on)</li><li>builds in Koji (already implemented)</li><li>creating updates in Bodhi (already implemented)</li></ul><p>For each step, I would like to cover the following structure:</p><ul><li>User perspective<ul><li>How to enable?</li><li>How to trigger?</li><li>How to enhance the workflow?</li><li>What this should do?</li></ul></li><li>Implementation<ul><li>How we can get the event?</li><li>How to implement it?</li><li>How to communicate with the user?</li></ul></li></ul><p><em>The user perspective is described as a goal, the already implemented parts are explicitly marked as already done.</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="from-upstream-to-dist-git">From upstream to dist-git<a href="#from-upstream-to-dist-git" class="hash-link" aria-label="Direct link to From upstream to dist-git" title="Direct link to From upstream to dist-git">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-perspective">User perspective<a href="#user-perspective" class="hash-link" aria-label="Direct link to User perspective" title="Direct link to User perspective">‚Äã</a></h3><p>As a maintainer, I would like to get a pull-request in distgit when the new upstream git-tag is created. Specifically:</p><ul><li>Version in specfile is updated and there is a new changelog entry.</li><li>New version of source is saved in lookaside cache and the spec-file uses that new version.</li><li>Some files can be directly synced to dist-git.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enable">How to enable?<a href="#how-to-enable" class="hash-link" aria-label="Direct link to How to enable?" title="Direct link to How to enable?">‚Äã</a></h4><ul><li>I can install the Packit GitHub application and configure the <code>propose-downstream</code> job. (already possible)</li><li>I can do this without the upstream&#x27;s permission:<ul><li>Send a pull-request to a repository containing the list of repositories to sync.</li></ul></li><li>I can configure this in dist-git.<ul><li>I can use packit config to enable this.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-trigger">How to trigger?<a href="#how-to-trigger" class="hash-link" aria-label="Direct link to How to trigger?" title="Direct link to How to trigger?">‚Äã</a></h4><p>As a maintainer, I expect this to be done when there is a new upstream release. Also, I have a way to trigger this manually when I need and I have a way to re-create the PRs when there is a problem.</p><p>Specifically, triggering works like this:</p><ul><li>New upstream release can trigger the workflow. (already implemented)</li><li>New commit to the branch can trigger the workflow. (needs to be enabled)</li><li>Adding <code>/propose-downstream</code> comment to any upstream issue. (already implemented)</li><li>Creating a new issue with some syntax.</li></ul><p>Updating the already created PRs:</p><ul><li>Dist-git PR is closed and the workflow is retriggered (e.g. <code>/propose-downstream</code> comment). (already implemented)</li><li>Comment to the dist-git PR to re-create the PR.</li><li>Be able to push to the PR created by Packit.<ul><li>Needs support in Pagure.</li></ul></li></ul><p>When reacting to comment, we now add üëç to the comment so the user knows we have accepted the event. (already implemented with üëÄ icon)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enhance-the-workflow">How to enhance the workflow?<a href="#how-to-enhance-the-workflow" class="hash-link" aria-label="Direct link to How to enhance the workflow?" title="Direct link to How to enhance the workflow?">‚Äã</a></h4><p>As a maintainer, I can influence the following:</p><ul><li>Which branch is updated.</li><li>How the new changelog entry looks like.</li><li>What files are synced to dist-git.</li><li>Some command that is run to change the state of the dist-git.</li></ul><p>When there is a packit config available, we can use it. If not, the configuration is not possible.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-this-should-done">What this should done?<a href="#what-this-should-done" class="hash-link" aria-label="Direct link to What this should done?" title="Direct link to What this should done?">‚Äã</a></h4><ol><li>Find the source for the new release and upload it to the lookaside cache if it is not already there.</li><li>Update the version in specfile</li><li>Create the new changelog entry. There are multiple options for this:</li></ol><ul><li>Changelog contains some generic text like <code>New upstream version X.Y.Z</code></li><li>Changelog is generated from the git history.</li><li>Changelog is copied from the upstream (GitHub) release.</li><li>Changelog is generated using a custom command. (Some environment variables can be provided what can be used when the syntax of the first option can&#x27;t be used.)</li></ul><p><img loading="lazy" src="/assets/images/downstream-pr-c29f87e9f7f758b27fa067d19c6c6840.png" width="728" height="494" class="img_ev3q">
<img loading="lazy" src="/assets/images/downstream-pr-specfile-change-2403733aeb255b643088b688ae5f8545.png" width="1091" height="531" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation">Implementation<a href="#implementation" class="hash-link" aria-label="Direct link to Implementation" title="Direct link to Implementation">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-we-can-get-the-event">How we can get the event?<a href="#how-we-can-get-the-event" class="hash-link" aria-label="Direct link to How we can get the event?" title="Direct link to How we can get the event?">‚Äã</a></h4><p>If a user installs Packit GitHub application, we can get the event via webhook from GitHub.</p><p><a href="https://github.com/packit/packit-service/blob/6d8764fb7dc59450a29e2ea8557b21c6f6f81748/packit_service/worker/events/github.py#L41" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/blob/6d8764fb7dc59450a29e2ea8557b21c6f6f81748/packit_service/worker/events/github.py#L41</a>:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ReleaseEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AddReleaseDbTrigger</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AbstractGithubEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/packit/packit-service/blob/6d8764fb7dc59450a29e2ea8557b21c6f6f81748/packit_service/worker/handlers/distgit.py#L101-L107" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/blob/6d8764fb7dc59450a29e2ea8557b21c6f6f81748/packit_service/worker/handlers/distgit.py#L101-L107</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@configured_as</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">JobType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">propose_downstream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@run_for_comment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">command</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;propose-downstream&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@run_for_comment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">command</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;propose-update&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># deprecated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@reacts_to</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReleaseEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@reacts_to</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">IssueCommentEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@reacts_to</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">IssueCommentGitlabEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ProposeDownstreamHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">JobHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If a user does not have Packit installed for an upstream project, we can react to the fedora-messaging messages created by Upstream Release Monitoring. (Package can be added on <a href="https://release-monitoring.org/" target="_blank" rel="noopener noreferrer">https://release-monitoring.org/</a> .)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-implement-it">How to implement it?<a href="#how-to-implement-it" class="hash-link" aria-label="Direct link to How to implement it?" title="Direct link to How to implement it?">‚Äã</a></h4><p>We already have this implemented, but we can add support for branch push as a second trigger. (packit/packit-service#1284)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-communicate-with-the-user">How to communicate with the user?<a href="#how-to-communicate-with-the-user" class="hash-link" aria-label="Direct link to How to communicate with the user?" title="Direct link to How to communicate with the user?">‚Äã</a></h4><p>The main part for improvement is providing feedback during the process:</p><ul><li>Here is an EPIC issue for this in upstream: <a href="https://github.com/packit/packit-service/issues/1082" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/issues/1082</a></li><li>Provide a dashboard view for the <code>propose-downstream</code> job. (<a href="https://github.com/packit/packit-service/issues/1292" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/issues/1292</a>, <a href="https://github.com/packit/dashboard/issues/155" target="_blank" rel="noopener noreferrer">https://github.com/packit/dashboard/issues/155</a>)</li><li>Live logs (<a href="https://github.com/packit/packit-service/issues/1080" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/issues/1080</a>) or letting the user know in place where the job was triggered (<a href="https://github.com/packit/packit-service/issues/1293" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/issues/1293</a>).<ul><li>When reacting to the comment, we can put a comment with the details (link to the PRs).</li><li>When reacting to the release/commit, we can use commit status (check runs) to show some details.</li></ul></li><li>When things go bad, there should be some feedback to the user.<ul><li>Also warnings should be accessible.</li><li>This is also true when retriggering the job when the dist-git PRs have already been created. In such a scenario, the current service silently ends. (One needs to close those PRs to regenerate them.)</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="koji-builds">Koji builds<a href="#koji-builds" class="hash-link" aria-label="Direct link to Koji builds" title="Direct link to Koji builds">‚Äã</a></h2><p>Here is a related issue for this: <a href="https://github.com/packit/packit-service/issues/55" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/issues/55</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-perspective-1">User perspective<a href="#user-perspective-1" class="hash-link" aria-label="Direct link to User perspective" title="Direct link to User perspective">‚Äã</a></h3><p>When there is a new commit in dist-git, I want a new build for it to be triggered. Optionally, I can set that I want to trigger scratch build instead of the production one or set other arguments when triggering the build (e.g. side-tag).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enable-1">How to enable?<a href="#how-to-enable-1" class="hash-link" aria-label="Direct link to How to enable?" title="Direct link to How to enable?">‚Äã</a></h4><p>Options:</p><ul><li>I can send a pull-request to a repository containing the list of repositories to build. (The same thing Zuul does.)</li><li>I can add a packit config to the distgit repository and configure the job (can be combined with the previous version so we can filter the projects before checking config presence). (already implemented)</li><li>A service authenticated by FAS where I can enable the build and, ideally, configure the process.</li></ul><p>Also, the <a href="https://accounts.fedoraproject.org/user/packit/" target="_blank" rel="noopener noreferrer"><code>packit</code> FAS user</a> needs to be added as a maintainer to the project. We can try getting the permission to run builds on any package, but that can add some requirements to the service (like running inside Fedora infrastructure, TODO: check it).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-trigger-1">How to trigger?<a href="#how-to-trigger-1" class="hash-link" aria-label="Direct link to How to trigger?" title="Direct link to How to trigger?">‚Äã</a></h4><p>The build is triggered once there is a new commit in dist-git.</p><p><del>Optionally, I can retrigger the action by a commit comment on dist-git.</del> This is not possible. Pagure does not support this</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enhance-the-workflow-1">How to enhance the workflow?<a href="#how-to-enhance-the-workflow-1" class="hash-link" aria-label="Direct link to How to enhance the workflow?" title="Direct link to How to enhance the workflow?">‚Äã</a></h4><p>In the usual case, no enhancement is needed. If we need one, we can use packit config to provide this extra info.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-this-should-done-1">What this should done?<a href="#what-this-should-done-1" class="hash-link" aria-label="Direct link to What this should done?" title="Direct link to What this should done?">‚Äã</a></h4><p>Clone the dist-git repository and trigger a new Koji build for the new commit.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-1">Implementation<a href="#implementation-1" class="hash-link" aria-label="Direct link to Implementation" title="Direct link to Implementation">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-we-can-get-the-event-1">How we can get the event?<a href="#how-we-can-get-the-event-1" class="hash-link" aria-label="Direct link to How we can get the event?" title="Direct link to How we can get the event?">‚Äã</a></h4><p>The information about new commits is sent to fedora-messaging. We already have a listener for it.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-implement-it-1">How to implement it?<a href="#how-to-implement-it-1" class="hash-link" aria-label="Direct link to How to implement it?" title="Direct link to How to implement it?">‚Äã</a></h4><ul><li>Make sure we react to these fedora-messaging messages.</li><li>Check that this project wants to do the build.</li><li>Optionally, get the extra arguments from the packit config. (No-config scenario is currently not supported.)</li><li>Trigger the build using the already implemented method of the packit&#x27;s Python API (in packit/packit project, not the web API).</li></ul><p>There are (at least) 3 ways how to do this:</p><ol><li>New <code>job_type</code> and new handler can be created to implement the core functionality. (used in the current implementation)</li></ol><ul><li>Needs a new name for a job that needs to be different to <code>production_build</code>, but looks like the easiest solution.</li></ul><ol start="2"><li>Reuse the existing handler for the <code>production-build</code> and act differently when running on a downstream project (submit the build in koji from dist-git, not by using an SRPM).</li></ol><ul><li>User needs to differentiate job config between downstream and upstream build =&gt; New config option can be created, but needs to be resolved in job (makes the parsing complicated) or in the job (too late, we&#x27;ve already send a &quot;Task accepted&quot; status to the user).</li></ul><ol start="3"><li>Add a new trigger type for <code>production-build</code> and act differently (submit the build in koji from dist-git, not by using an SRPM).</li></ol><ul><li>With the current database schema, commit (=<code>GitBranchModel</code>) implies one config trigger (<code>JobConfigTriggerType.commit</code> in this case).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-communicate-with-the-user-1">How to communicate with the user?<a href="#how-to-communicate-with-the-user-1" class="hash-link" aria-label="Direct link to How to communicate with the user?" title="Direct link to How to communicate with the user?">‚Äã</a></h4><ul><li>When the build is triggered, affected users are notified via standard Fedora notifications.</li><li><del>When there is a problem, we can comment on the commit.</del> We can&#x27;t. This is not supported by Pagure.</li><li>Configurable repository to create an issue in.</li><li>Optionally, when the commit comes from the PR, we can comment to that PR.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bodhi-updates">Bodhi updates<a href="#bodhi-updates" class="hash-link" aria-label="Direct link to Bodhi updates" title="Direct link to Bodhi updates">‚Äã</a></h2><p>Here is a related issue for this: <a href="https://github.com/packit/packit-service/issues/74" target="_blank" rel="noopener noreferrer">https://github.com/packit/packit-service/issues/74</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-perspective-2">User perspective<a href="#user-perspective-2" class="hash-link" aria-label="Direct link to User perspective" title="Direct link to User perspective">‚Äã</a></h3><p>When there is a new successful production build, I want a new Bodhi update to be created for me. If the commit contains info Bugzilla that is being closed by this, the Bugzilla is linked to this update</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enable-2">How to enable?<a href="#how-to-enable-2" class="hash-link" aria-label="Direct link to How to enable?" title="Direct link to How to enable?">‚Äã</a></h4><p>Options:</p><ul><li>I can send a pull-request to a repository containing the list of repositories to build. (The same thing Zuul does.)</li><li>I can add a packit config to the distgit repository and configure the job (can be combined with the previous version so we can filter the projects before checking config presence).</li><li>A service authenticated by FAS where I can enable the build and, ideally, configure the process.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-trigger-2">How to trigger?<a href="#how-to-trigger-2" class="hash-link" aria-label="Direct link to How to trigger?" title="Direct link to How to trigger?">‚Äã</a></h4><p>When the new version of the package is successfully built, the update can be created using this build.</p><p>TODO: We need to find a way to trigger the process manually. (In the worst case, we have a CLI.)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enhance-the-workflow-2">How to enhance the workflow?<a href="#how-to-enhance-the-workflow-2" class="hash-link" aria-label="Direct link to How to enhance the workflow?" title="Direct link to How to enhance the workflow?">‚Äã</a></h4><p>In the usual case, no enhancement is needed. If we need one, we can use packit config or dist-git commit to provide this extra info.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-this-should-done-2">What this should done?<a href="#what-this-should-done-2" class="hash-link" aria-label="Direct link to What this should done?" title="Direct link to What this should done?">‚Äã</a></h4><p>Create a new Bodhi update using the finished build.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-2">Implementation<a href="#implementation-2" class="hash-link" aria-label="Direct link to Implementation" title="Direct link to Implementation">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-we-can-get-the-event-2">How we can get the event?<a href="#how-we-can-get-the-event-2" class="hash-link" aria-label="Direct link to How we can get the event?" title="Direct link to How we can get the event?">‚Äã</a></h4><p>The information about successful builds is announced on fedora-messaging and we already listen for this because of the upstream Koji builds.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-implement-it-2">How to implement it?<a href="#how-to-implement-it-2" class="hash-link" aria-label="Direct link to How to implement it?" title="Direct link to How to implement it?">‚Äã</a></h4><ul><li>Make sure we listen to the relevant events.</li><li>New handler can be created to implement the core functionality:<ul><li>Check that this project wants to do the build. (New job type and new trigger type.)</li><li>Optionally, get the extra arguments from the packit config. (No-config scenario is currently not supported.)</li><li>Create the update using the already implemented method of the packit&#x27;s Python API (in packit/packit project, not the web API).</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-communicate-with-the-user-2">How to communicate with the user?<a href="#how-to-communicate-with-the-user-2" class="hash-link" aria-label="Direct link to How to communicate with the user?" title="Direct link to How to communicate with the user?">‚Äã</a></h4><p>Once the update is done, a user gets the info via usual Fedora messaging.</p><p><del>TODO: If we have some problem with the creation, we need to find a good method to communicate with the user.</del>
User can configure a repository where Packit create an issue in case of failed update creation. (already implemented)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="generic-implementation-issues">Generic implementation issues<a href="#generic-implementation-issues" class="hash-link" aria-label="Direct link to Generic implementation issues" title="Direct link to Generic implementation issues">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="to-split-or-not-to-split-the-service">To split or not to split (the service)<a href="#to-split-or-not-to-split-the-service" class="hash-link" aria-label="Direct link to To split or not to split (the service)" title="Direct link to To split or not to split (the service)">‚Äã</a></h3><p>There is an occurring question if the new functionality/job will be incorporated into the existing service, done as a separate deployment or done from scratch. Let&#x27;s put down some benefits and problems.</p><ol><li><p>New functionality added to the existing service</p><ul><li>The new functionality is added as a new handler (=a separate class).</li><li>If we need to react to a new event, the parsing needs to be implemented.</li><li>The mapping between event and handler is done by decorating the handler and explicitly setting the event we react on.</li><li>The main benefits are the ease of implementation, reusing most of the work we already have and being able to quickly test the new functionality.</li><li>Adding new functionality can lead to a more tightly coupled design or can force us to make the current architecture more modular and generic (which requires extra work).</li><li>Since we have one database, we can show some overall status and combine information from upstream part and downstream part (including the propose-downstream job that is somewhere in the middle).</li></ul></li><li><p>New functionality as another deployment</p><ul><li>It&#x27;s more a version of the previous one.</li><li>Benefits are independence, being able to have different identities and limits.</li><li>The main downside is a duplicated afford needed to maintain the service and to run the shared part (task scheduler, listeners, API service).</li><li>This approach has been chosen for our centos-stream service, how has it gone? (Jirka has mentioned something like: it was fine, no big issues)</li><li>If there will be a requirement to run the service inside Fedora infrastructure, this will be an option to reuse the current code and also satisfy that.</li></ul></li><li><p>New instance</p><ul><li>Nice opportunity for doing it right. (Or at least in a better way.)</li><li>There is a higher risk of issues before the service is ready.</li><li>The time for the implementation is higher.</li><li>Once done, we have two separate services and code-bases we need to maintain.</li></ul></li></ol><p>My personal opinion:</p><ul><li>We can&#x27;t work on multiple different code-bases in parallel. =&gt; We need to implement it inside our current codebase. =&gt; We need to count with extra time to improve the current design when adding new features.</li><li>The first version can be done in a few sprints, the third in months. (Some MVP is really easy to do in the first version.)</li><li>I don&#x27;t want to choose the current service just because of some personal feelings. For me, it&#x27;s more about a chance to make the current service better (also from the architectural point of view).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="plan">Plan<a href="#plan" class="hash-link" aria-label="Direct link to Plan" title="Direct link to Plan">‚Äã</a></h2><ol><li>[done]<!-- --> Start with the packit config as a way to enable the workflow. (Allows quicker implementation, but still an easy way how to test this.)</li><li>[done]<!-- --> Implement the Koji builds for new dist-git commits.</li><li>[done]<!-- --> Implement the Bodhi updates for new Koji builds.</li><li>Allow users to test our workflow.</li><li>Provide a better way how to enable this without packit config in dist-git.</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/packit/research/tree/main/research/integrations/downstream/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/research/integrations/console"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">console.redhat.com provisioning</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/research/integrations/gitlab"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GitLab integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#from-upstream-to-dist-git" class="table-of-contents__link toc-highlight">From upstream to dist-git</a><ul><li><a href="#user-perspective" class="table-of-contents__link toc-highlight">User perspective</a></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a></li></ul></li><li><a href="#koji-builds" class="table-of-contents__link toc-highlight">Koji builds</a><ul><li><a href="#user-perspective-1" class="table-of-contents__link toc-highlight">User perspective</a></li><li><a href="#implementation-1" class="table-of-contents__link toc-highlight">Implementation</a></li></ul></li><li><a href="#bodhi-updates" class="table-of-contents__link toc-highlight">Bodhi updates</a><ul><li><a href="#user-perspective-2" class="table-of-contents__link toc-highlight">User perspective</a></li><li><a href="#implementation-2" class="table-of-contents__link toc-highlight">Implementation</a></li></ul></li><li><a href="#generic-implementation-issues" class="table-of-contents__link toc-highlight">Generic implementation issues</a><ul><li><a href="#to-split-or-not-to-split-the-service" class="table-of-contents__link toc-highlight">To split or not to split (the service)</a></li></ul></li><li><a href="#plan" class="table-of-contents__link toc-highlight">Plan</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/guide">Onboarding guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/fedora-releases-guide">Fedora releases guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item">
                  <a href="https://chat.fedoraproject.org/#/room/#packit:fedora.im">
                    #packit:fedora.im
                  </a> (Element / Matrix)
                </li><li class="footer__item">
                  <a href="https://libera.chat/">
                    #packit:libera.chat
                  </a> (IRC)
                </li><li class="footer__item">
                  <a href="mailto:hello@packit.dev">hello@packit.dev</a>
                </li><li class="footer__item">
                  <a href="https://fosstodon.org/@packit" rel="me">
                    @packit@fosstodon.org
                  </a> (Mastodon)
                </li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/usage">Usage Charts</a></li><li class="footer__item"><a class="footer__link-item" href="/posts">Blog Posts</a></li><li class="footer__item"><a href="https://github.com/packit" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Packit is a Red Hat sponsored free software project. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cb858bf0.js"></script>
<script src="/assets/js/main.83fc030a.js"></script>
</body>
</html>