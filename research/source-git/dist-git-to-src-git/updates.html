<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-research docs-doc-id-source-git/dist-git-to-src-git/updates">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Updates of source-git repos (archived) | Packit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://packit.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://packit.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://packit.dev/research/source-git/dist-git-to-src-git/updates"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-research-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-research-current"><meta data-rh="true" property="og:title" content="Updates of source-git repos (archived) | Packit"><meta data-rh="true" name="description" content="This research is outdated and replaced by research packit source-git update-source-git."><meta data-rh="true" property="og:description" content="This research is outdated and replaced by research packit source-git update-source-git."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://packit.dev/research/source-git/dist-git-to-src-git/updates"><link data-rh="true" rel="alternate" href="https://packit.dev/research/source-git/dist-git-to-src-git/updates" hreflang="en"><link data-rh="true" rel="alternate" href="https://packit.dev/research/source-git/dist-git-to-src-git/updates" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://STHKG8EYKZ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Packit" href="/opensearch.xml">





<link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="Packit Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="Packit Blog Atom Feed">
<link rel="alternate" type="application/json" href="/posts/feed.json" title="Packit Blog JSON Feed">
<link rel="alternate" type="application/rss+xml" href="/posts/weekly/rss.xml" title="Packit Weekly RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/weekly/atom.xml" title="Packit Weekly Atom Feed">
<link rel="alternate" type="application/json" href="/posts/weekly/feed.json" title="Packit Weekly JSON Feed"><link rel="stylesheet" href="/assets/css/styles.3595ad89.css">
<link rel="preload" href="/assets/js/runtime~main.cb858bf0.js" as="script">
<link rel="preload" href="/assets/js/main.83fc030a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Packit Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Packit Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Packit</b></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/source-git">Source-git</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/development">Development</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/deployment">Deployment</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/research">Research</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/posts">Blog Posts</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/posts/weekly">Weekly Updates</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://dashboard.packit.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://status.packit.dev/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/packit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research">Research notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/job_referencing">Job referencing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/making-decisions">Making decisions in our projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/automation-tools">Tools/libraries similar or related to the Packit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools/libraries similar or related to the Packit&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/celery">Celery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Celery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/database">Database</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/deployment">Deployment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/deprecation">Deprecation policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/research/git-notes">Git Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/integrations">Integrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/automation-of-internal-processes">Automation of internal processes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Automation of internal processes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/monitoring">Monitoring &amp; Metrics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring &amp; Metrics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/monorepo-support">Monorepos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monorepos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/outages">How to manage outages</a><button aria-label="Toggle the collapsible sidebar category &#x27;How to manage outages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/research/source-git">Source-Git</a><button aria-label="Toggle the collapsible sidebar category &#x27;Source-Git&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/customize-update-dist-git">Customizing &#x27;source-git update-dist-git&#x27;</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/research/source-git/dist-git-to-src-git">Converting dist-git to source-git</a><button aria-label="Toggle the collapsible sidebar category &#x27;Converting dist-git to source-git&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/research/source-git/dist-git-to-src-git/updates">Updates of source-git repos (archived)</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/fedora-spec-files">Fedora package candidates for source-git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/in-zuul">Source-git in Zuul</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/on-pagure">Source-git on Pagure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/split-the-stream">Splitting source-git and upstream</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/sync-status">Verifying the sync status of source-git and dist-git repos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/research/source-git/update">Updating source-git</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/specfiles">Specfiles</a><button aria-label="Toggle the collapsible sidebar category &#x27;Specfiles&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/testing">Testing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/user-interface">User Interface</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Interface&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/user-stories">User Stories</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Stories&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/category/user-experience">User Experience</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Experience&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/research/workflow-engines">Workflow engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workflow engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/research/source-git"><span itemprop="name">Source-Git</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/research/source-git/dist-git-to-src-git"><span itemprop="name">Converting dist-git to source-git</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Updates of source-git repos (archived)</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Updates of source-git repos (archived)</h1></header><p>This research is outdated and replaced by <a href="/research/source-git/update">research <code>packit source-git update-source-git</code></a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="problem">Problem<a href="#problem" class="hash-link" aria-label="Direct link to Problem" title="Direct link to Problem">​</a></h2><ul><li>We need to convert new dist-git commits to the existing source-git repository.</li><li>The changes need to be reversible.<ul><li>=&gt; We need to get back to the dist-git structure from the source-git.</li></ul></li><li>Possible changes:<ul><li>changes in the packaging files (not in spec-file, not in patch files; e.g. config-files)</li><li>general changes in the spec-file (e.g. new release, new dependency, fixing a packaging problem)</li><li>change in patches:<ul><li>patch added</li><li>patch edited</li><li>patch removed</li></ul></li></ul></li><li>Patches can be applied conditionally (or even manually).</li><li>Users can help with the sync. (Review and tweak the change.)<ul><li>Note from the demo meeting.
For some users, it is not a problem to be able to make source-git generating locally.
They can review (and potentially) improve/correct the result.</li><li>Do we want to allow it? How can we do it to no break the workflow?</li></ul></li><li>No force-push possible.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-can-differ-when-going-back-to-the-dist-git-structure">What can differ when going back to the dist-git structure?<a href="#what-can-differ-when-going-back-to-the-dist-git-structure" class="hash-link" aria-label="Direct link to What can differ when going back to the dist-git structure?" title="Direct link to What can differ when going back to the dist-git structure?">​</a></h3><ul><li>Be able to create the &quot;same&quot; <code>RPM</code> file? What is &quot;same&quot;?</li><li>Can spec-file differ? e.g. different patch names, comments<ul><li>Does the result have to be readable?</li><li>Is it a problem to have really high number of technical patches without sense?</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proposal-1">Proposal 1<a href="#proposal-1" class="hash-link" aria-label="Direct link to Proposal 1" title="Direct link to Proposal 1">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-changes">New changes<a href="#new-changes" class="hash-link" aria-label="Direct link to New changes" title="Direct link to New changes">​</a></h3><ul><li>When changing the patches save the line index and patch name with the commit
(saving itself is described bellow).</li><li>Create a new source-git commit:<ul><li>patch added:<ul><li>convert patch to source changes</li><li>save <code>{&quot;patch&quot;: &quot;name.patch&quot;, index=42}</code> with the commit</li><li>comment out the line with the patch</li></ul></li><li>patch removed:<ul><li>invert the patch and convert to the changes</li><li>save <code>{&quot;patch&quot;: &quot;name.patch&quot;, index=-42}</code> with the commit</li><li>remove the line with the patch</li></ul></li><li>patch edited:<ul><li>convert patch diff to source changes<ul><li>diff of patches / revert+new change</li></ul></li><li>save <code>{&quot;patch&quot;: &quot;name.patch&quot;, index=42}</code> with the commit</li><li>line with patch should be already commented</li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reverse">Reverse<a href="#reverse" class="hash-link" aria-label="Direct link to Reverse" title="Direct link to Reverse">​</a></h3><ul><li>When going back from commit to patch:<ul><li>In case of commit without metadata:<ul><li>Generate a patch file and add it to the spec-file.</li></ul></li><li>In case of <code>index &gt;= 0</code> in the metadata:<ul><li>Check the existence of the <code>name.patch</code>:<ul><li>If not present:<ul><li>Uncomment the <code>index</code> line in the spec-file.</li><li>Generate <code>name.patch</code> from the commit.</li></ul></li><li>If present:<ul><li>Generate a new path from the commit and merge it into <code>name.patch</code>.</li></ul></li></ul></li></ul></li><li>In case of <code>index == -42</code>:<ul><li>Remove the <code>name.patch</code>.</li><li>Remove the line <code>42</code> in the spec-file.</li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="saving-metadata">Saving metadata<a href="#saving-metadata" class="hash-link" aria-label="Direct link to Saving metadata" title="Direct link to Saving metadata">​</a></h3><p>We have various way, how to save metadata for regeneration:</p><ul><li>Enhance packit config file:<ul><li>➕ editable by users</li><li>➕ can be seen/reviewed</li><li>➕ preserved between git commits</li><li>➖ is not connected with the commit (the mapping can be added)</li></ul></li><li>git note (see <a href="/research/git-notes">Git Notes research</a> for more info):<ul><li>➕ attached to the git commit</li><li>➕ can be changed, but not so easily as a regular file</li><li>➖ not preserved between git commits (easier usage if we use it together with second proposal)</li><li>➖ not pulled automatically</li></ul></li><li>git-message<ul><li>We can have strict format of the git-message (e.g. yaml).</li><li>➕ attached to the git commit</li><li>➕ pulled automatically</li><li>➖ if we need to extend the info, we can loose readability</li><li>➖ not preserved between git commits (easier usage if we use it together with second proposal)</li><li>⁉ cannot be edited when pushed</li><li>Will be read by users =&gt; users can not like it.</li><li>If we want to allow users to write it as well,
we need to have some wrapper on top of git to ease that.</li></ul></li><li>other file<ul><li>➕ editable by users</li><li>➕ can be seen/reviewed</li><li>➕ preserved between git commits</li><li>➖ is not connected with the commit</li><li>➖ another file</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-of-proposal-1">Conclusion of proposal 1<a href="#conclusion-of-proposal-1" class="hash-link" aria-label="Direct link to Conclusion of proposal 1" title="Direct link to Conclusion of proposal 1">​</a></h3><ul><li>We need to add metadata to the source-git commits.<ul><li>Can be used for other information.</li><li>Depending on the saving mechanism (above) it can reduce/break the usual git usage.</li></ul></li><li>➕ The git history is clear.</li><li>➖ A lot of work needs to be done.<ul><li>Multiple scenarios; lot of corner cases.</li></ul></li><li>➖ It will be hard to correct/improve the workflow.</li><li>➕ Reverted dist-git still preserves the conditions, naming and location of the patches.</li><li>➖ Generated source-git will contain all the patches.<ul><li>Various improvements and strategies possible and doable later
(e.g. avoid both of if-else branches, expand macros before getting of the patches).</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proposal-2">Proposal 2<a href="#proposal-2" class="hash-link" aria-label="Direct link to Proposal 2" title="Direct link to Proposal 2">​</a></h2><ul><li><p>Easy solution that mimics the history overwriting without force push.</p></li><li><p>There are multiple ways, how to do this:</p><ul><li><p>(I) Regenerate the source-git from scratch and use
<a href="https://git-scm.com/docs/merge-strategieshttps://git-scm.com/docs/merge-strategies" target="_blank" rel="noopener noreferrer">ours</a>
merging strategy to merge the new version on top of the old version ignoring its content.
(Packit does not work now with upstream-ref outside of the linear history.)</p><p><img loading="lazy" alt="git-merge-ours" src="/assets/images/git-merge-ours-fdb835cdb153f9446c147f13e2537947.jpg" width="1015" height="1353" class="img_ev3q">
<img loading="lazy" alt="git-merge-ours-with-comments" src="/assets/images/git-merge-ours-with-comments-ce746975493e0ba0696f6df6024897ad.jpg" width="1015" height="1353" class="img_ev3q">
<img loading="lazy" alt="git-merge-ours-new" src="/assets/images/git-merge-ours-new-4660d71947df31f2c7b57e19aa41a1de.jpg" width="1015" height="1353" class="img_ev3q"></p></li><li><p>(II) Use force checkout the content instead of merge to have regular commit instead of the head one.</p><p><img loading="lazy" alt="git-force-checkout" src="/assets/images/git-force-checkout-c2e0e24cd97cbca2b8c3030bd984ddce.jpg" width="1015" height="1353" class="img_ev3q"></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># generate new source-git to `rpm-4.14.2-36.el8` branch starting on master</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout c8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout -f rpm-4.14.2-36.el8 -- </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># use the `sg-start-rpm-4.14.2-25.el8` as upstream-ref in config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># (use the old one =&gt; revert that change)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#e3116c">&quot;Update from distgit&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">* d3ec53a - Update from distgit </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c8s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 9eba783 - Apply Patch1002: rpm-4.14.2-unversioned-python.patch </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rpm-4.14.2-25.el8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 9609ba3 - Compile with Platform-Python binary where relevant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 5513f1d - Apply Patch1: rpm-4.11.x-siteconfig.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ce19f5d - Downstream spec with commented patches </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tag: sg-start-rpm-4.14.2-25.el8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 7c6a6b1 - .packit.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 49dd86b - Unpack archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* fbcb954 - init </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">master</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">commit d3ec53a11e62cb01252ddd166864e1b9ed6a84e1 (HEAD -&gt; c8s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Author: Frantisek Lachman &lt;flachman@redhat.com&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date:   Thu Jun 11 09:35:01 2020 +0200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Update from distgit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Signed-off-by: Frantisek Lachman &lt;flachman@redhat.com&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/rpm.spec                   |  69 +++++++++-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> build/files.c                    |  31 ++++-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> build/pack.c                     |  34 ++++-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tools/debugedit.c                | 584 +++++++++++++++++++++++++++++++++++++++++++++++++++++-------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 26 files changed, 628 insertions(+), 270 deletions(-)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ packit srpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Input directory is an upstream repository.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">100</span><span class="token plain">%</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.96M  eta 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">44</span><span class="token plain"> patches added to </span><span class="token string" style="color:#e3116c">&#x27;/home/flachman/Projects/git.centos.org/src/rpm/SPECS/rpm.spec&#x27;</span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRPM: /home/flachman/Projects/git.centos.org/src/rpm/rpm-4.14.2-37.gd3ec53a1.fc32.src.rpm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>(III) Another alternative is to revert to the initial commit
(we should start with some neutral state) and rerun the generation script.
This will have upstream tag in the right place and will have a linear history.</p><p><img loading="lazy" alt="git-revert-to-init-1" src="/assets/images/git-revert-to-init-1-f92f53fd353287a6b3c7e8e93eee979f.jpg" width="1015" height="1353" class="img_ev3q">
<img loading="lazy" alt="git-revert-to-init-2" src="/assets/images/git-revert-to-init-2-d0b3c118317b035c08c3426093093ad3.jpg" width="1015" height="1353" class="img_ev3q"></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">* 46b055b - Apply Patch1002: rpm-4.14.2-unversioned-python.patch </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c8s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* f20e0c9 - Compile with Platform-Python binary where relevant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 5f7b687 - Apply Patch1000: disable-python-extra.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 41f0dd8 - Apply Patch1: rpm-4.11.x-siteconfig.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 0488837 - Downstream spec with commented patches </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tag: sg-start-rpm-4.14.2-36.el8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 3cf64a9 - .packit.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ef4b7f6 - Unpack archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 3bbc954 - revert-to-init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 9eba783 - Apply Patch1002: rpm-4.14.2-unversioned-python.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 9609ba3 - Compile with Platform-Python binary where relevant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* a43a233 - Apply Patch1000: disable-python-extra.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 5513f1d - Apply Patch1: rpm-4.11.x-siteconfig.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ce19f5d - Downstream spec with commented patches </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tag: sg-start-rpm-4.14.2-25.el8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 7c6a6b1 - .packit.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 49dd86b - Unpack archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* fbcb954 - init </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">master</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> 9eba783 46b055b --stat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.packit.yaml                                                                                                                               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> +-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/0001-Unpack-archive.patch                                                                                                            </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">696860</span><span class="token plain"> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">0001-Apply-Patch1-rpm-4.11.x-siteconfig.patch.patch </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 0002-Apply-Patch1-rpm-4.11.x-siteconfig.patch.patch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">                         </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> +-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">0002-Apply-Patch2-rpm-4.13.0-fedora-specspo.patch.patch </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 0003-Apply-Patch2-rpm-4.13.0-fedora-specspo.patch.patch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">                 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> +-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">0003-Apply-Patch3-rpm-4.9.90-no-man-dirs.patch.patch </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 0004-Apply-Patch3-rpm-4.9.90-no-man-dirs.patch.patch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">                       </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> +-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/0044-Use-newline-as-a-delimiter-to-avoid-xargs-messing-up.patch                                                                      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">26</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/0045-Make-check-buildroot-check-the-build-files-in-parall.patch                                                                      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> rpm-4.14.2-38.g9b8c91d8.fc32.src.rpm </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> SPECS/rpm-4.14.2.tar.bz2                                                                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    Bin </span><span class="token number" style="color:#36acaa">4251502</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4151934</span><span class="token plain"> bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/rpm-4.14.3.tar.bz2                                                                                                                   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    Bin </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5059526</span><span class="token plain"> bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> SPECS/rpm.spec                                                                                                                             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">69</span><span class="token plain"> +-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> build/files.c                                                                                                                              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> +-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain">                                                                                                                         </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">584</span><span class="token plain"> +-</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ packit srpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Input directory is an upstream repository.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">44</span><span class="token plain"> patches added to </span><span class="token string" style="color:#e3116c">&#x27;/home/flachman/Projects/git.centos.org/src/rpm/SPECS/rpm.spec&#x27;</span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRPM: /home/flachman/Projects/git.centos.org/src/rpm/rpm-4.14.2-37.gd3ec53a1.fc32.src.rpm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>We need to make sure that we go by the correct branch when reverting the content to the dist-git style.</p><ul><li>Saving metadata (like above) can help us with that.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-of-proposal-2">Conclusion of proposal 2<a href="#conclusion-of-proposal-2" class="hash-link" aria-label="Direct link to Conclusion of proposal 2" title="Direct link to Conclusion of proposal 2">​</a></h3><ul><li>Final git tree:<ul><li>version (I)<ul><li>➖ Packit does not work with <code>upstream-ref</code> in merged branch</li><li>➕ We can still see the history of all generated source-gits.</li><li>➖ A lot of branches around.</li></ul></li><li>version (II)<ul><li>➖ The old source-git history in the git history can be outdated.
(Still contains the commits from the first run.)</li><li>➖ We loose the history about creation of new source-git.</li><li>➕ Git history is clear. Just one new commit.<ul><li>Effectivelly, same content as the manual approach.</li></ul></li></ul></li><li>version (III)<ul><li>➕ contains the last source-git generation history</li><li>➖ lots of unnecessary commits from the last runs, that are reverted each time</li></ul></li></ul></li><li>➕ Source-git generation can be improved on the flow.
(We can do any rapid change without being scared of the future.)</li><li>➕ Easy to implement.</li><li>⁉ We still need to save metadata to fix problems like conditional patching.</li><li>⁉ Conditional patching can be solved in the generation script.<ul><li>We can theoretically generate multiple variants and let the user pick the correct one.</li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/packit/research/tree/main/research/source-git/dist-git-to-src-git/updates.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/research/source-git/dist-git-to-src-git"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Converting dist-git to source-git</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/research/source-git/fedora-spec-files"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fedora package candidates for source-git</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problem" class="table-of-contents__link toc-highlight">Problem</a><ul><li><a href="#what-can-differ-when-going-back-to-the-dist-git-structure" class="table-of-contents__link toc-highlight">What can differ when going back to the dist-git structure?</a></li></ul></li><li><a href="#proposal-1" class="table-of-contents__link toc-highlight">Proposal 1</a><ul><li><a href="#new-changes" class="table-of-contents__link toc-highlight">New changes</a></li><li><a href="#reverse" class="table-of-contents__link toc-highlight">Reverse</a></li><li><a href="#saving-metadata" class="table-of-contents__link toc-highlight">Saving metadata</a></li><li><a href="#conclusion-of-proposal-1" class="table-of-contents__link toc-highlight">Conclusion of proposal 1</a></li></ul></li><li><a href="#proposal-2" class="table-of-contents__link toc-highlight">Proposal 2</a><ul><li><a href="#conclusion-of-proposal-2" class="table-of-contents__link toc-highlight">Conclusion of proposal 2</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/guide">Onboarding guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/fedora-releases-guide">Fedora releases guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item">
                  <a href="https://chat.fedoraproject.org/#/room/#packit:fedora.im">
                    #packit:fedora.im
                  </a> (Element / Matrix)
                </li><li class="footer__item">
                  <a href="https://libera.chat/">
                    #packit:libera.chat
                  </a> (IRC)
                </li><li class="footer__item">
                  <a href="mailto:hello@packit.dev">hello@packit.dev</a>
                </li><li class="footer__item">
                  <a href="https://fosstodon.org/@packit" rel="me">
                    @packit@fosstodon.org
                  </a> (Mastodon)
                </li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/usage">Usage Charts</a></li><li class="footer__item"><a class="footer__link-item" href="/posts">Blog Posts</a></li><li class="footer__item"><a href="https://github.com/packit" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Packit is a Red Hat sponsored free software project. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cb858bf0.js"></script>
<script src="/assets/js/main.83fc030a.js"></script>
</body>
</html>